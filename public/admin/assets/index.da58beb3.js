import{e as Oe,r as w,a7 as Pe,j as f,a8 as je,am as m,M as ve,a as j,a6 as L,aE as we,ao as xe,ap as ye,B as C,aF as Ae}from"./index.8f3ae58a.js";import{C as Ce}from"./index.b1abcd55.js";import{P as De}from"./index.075db186.js";import{r as Se,b as Fe,c as Ee,d as Ie,C as Be}from"./index.8d48f761.js";import{I as ke}from"./index.17df09d3.js";import"./index.2568e243.js";function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ne(Object(r),!0).forEach(function(n){je(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Me(e,t){var r=w.exports.useContext(Pe),n=r.prefixCls,o=n===void 0?"arco":n,i=e.spin,a=e.className,u=oe(oe({"aria-hidden":!0,focusable:!1,ref:t},e),{},{className:"".concat(a?a+" ":"").concat(o,"-icon ").concat(o,"-icon-subscribe-add")});return i&&(u.className="".concat(u.className," ").concat(o,"-icon-loading")),delete u.spin,delete u.isIcon,f("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...u,children:f("path",{d:"M24.53 6.007H9.97c-.535 0-.97.449-.97 1.003V41.8c0 .148.152.245.28.179l15.25-7.881 14.248 7.88c.129.067.28-.03.28-.179V22.06M27.413 11.023h6.794m0 0H41m-6.794 0V4m0 7.023v7.023"})})}var V=Oe.forwardRef(Me);V.defaultProps={isIcon:!0};V.displayName="IconSubscribeAdd";var _e=V;const{Row:Re}=xe;function Ne(e){const[t]=m.useForm(),[r,n]=w.exports.useState(!1);async function o(){t.validate().then(async i=>{var u;n(!0);let a;e.uuid?a=await Se({...i,uuid:e.uuid}):a=await Fe({...i,pid:(u=e.id)!=null?u:0,level:e.level+1}),a.code===0&&(ye.success(a.message),e.reload(),e.close(),t.resetFields())}).catch(i=>{console.log(i)}).finally(()=>{n(!1)})}return f(ve,{title:e.uuid?"\u66F4\u65B0\u5206\u7C7B":"\u521B\u5EFA\u5206\u7C7B",visible:e.visible,onOk:o,onCancel:e.close,confirmLoading:r,children:f(m,{form:t,children:j(Re,{children:[f(m.Item,{label:"\u540D\u5B57",field:"name",rules:[{required:!0,message:!0}],children:f(L,{type:"text"})}),f(m.Item,{label:"\u7F16\u53F7",field:"code",rules:[{required:!0,message:!0}],children:f(L,{type:"text"})}),f(m.Item,{label:"\u6392\u5E8F",field:"sortIndex",children:f(we,{})})]})})})}function v(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function x(e){return!!e&&!!e[d]}function P(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var o=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return o===Object||typeof o=="function"&&Function.toString.call(o)===Ge}(e)||Array.isArray(e)||!!e[de]||!!(!((t=e.constructor)===null||t===void 0)&&t[de])||T(e)||X(e))}function S(e,t,r){r===void 0&&(r=!1),A(e)===0?(r?Object.keys:Y)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,o){return t(o,n,e)})}function A(e){var t=e[d];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:T(e)?2:X(e)?3:0}function W(e,t){return A(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qe(e,t){return A(e)===2?e.get(t):e[t]}function be(e,t,r){var n=A(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function ze(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function T(e){return $e&&e instanceof Map}function X(e){return Ue&&e instanceof Set}function O(e){return e.o||e.t}function J(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=He(e);delete t[d];for(var r=Y(t),n=0;n<r.length;n++){var o=r[n],i=t[o];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function F(e,t){return t===void 0&&(t=!1),Q(e)||x(e)||!P(e)||(A(e)>1&&(e.set=e.add=e.clear=e.delete=Ke),Object.freeze(e),t&&S(e,function(r,n){return F(n,!0)},!0)),e}function Ke(){v(2)}function Q(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function b(e){var t=Ve[e];return t||v(18,e),t}function ie(){return E}function N(e,t){t&&(b("Patches"),e.u=[],e.s=[],e.v=t)}function k(e){$(e),e.p.forEach(Le),e.p=null}function $(e){e===E&&(E=e.l)}function ue(e){return E={p:[],l:E,h:e,m:!0,_:0}}function Le(e){var t=e[d];t.i===0||t.i===1?t.j():t.g=!0}function q(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||b("ES5").S(t,e,n),n?(r[d].P&&(k(t),v(4)),P(e)&&(e=M(t,e),t.l||_(t,e)),t.u&&b("Patches").M(r[d].t,e,t.u,t.s)):e=M(t,r,[]),k(t),t.u&&t.v(t.u,t.s),e!==he?e:void 0}function M(e,t,r){if(Q(t))return t;var n=t[d];if(!n)return S(t,function(u,l){return ae(e,n,t,u,l,r)},!0),t;if(n.A!==e)return t;if(!n.P)return _(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=n.i===4||n.i===5?n.o=J(n.k):n.o,i=o,a=!1;n.i===3&&(i=new Set(o),o.clear(),a=!0),S(i,function(u,l){return ae(e,n,o,u,l,r,a)}),_(e,o,!1),r&&e.u&&b("Patches").N(n,r,e.u,e.s)}return n.o}function ae(e,t,r,n,o,i,a){if(x(o)){var u=M(e,o,i&&t&&t.i!==3&&!W(t.R,n)?i.concat(n):void 0);if(be(r,n,u),!x(u))return;e.m=!1}else a&&r.add(o);if(P(o)&&!Q(o)){if(!e.h.D&&e._<1)return;M(e,o),t&&t.A.l||_(e,o)}}function _(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&F(t,r)}function z(e,t){var r=e[d];return(r?O(r):e)[t]}function ce(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function U(e){e.P||(e.P=!0,e.l&&U(e.l))}function K(e){e.o||(e.o=J(e.t))}function G(e,t,r){var n=T(t)?b("MapSet").F(t,r):X(t)?b("MapSet").T(t,r):e.O?function(o,i){var a=Array.isArray(o),u={i:a?1:0,A:i?i.A:ie(),P:!1,I:!1,R:{},l:i,t:o,k:null,o:null,j:null,C:!1},l=u,c=H;a&&(l=[u],c=D);var s=Proxy.revocable(l,c),h=s.revoke,y=s.proxy;return u.k=y,u.j=h,y}(t,r):b("ES5").J(t,r);return(r?r.A:ie()).p.push(n),n}function We(e){return x(e)||v(22,e),function t(r){if(!P(r))return r;var n,o=r[d],i=A(r);if(o){if(!o.P&&(o.i<4||!b("ES5").K(o)))return o.t;o.I=!0,n=le(r,i),o.I=!1}else n=le(r,i);return S(n,function(a,u){o&&qe(o.t,a)===u||be(n,a,t(u))}),i===3?new Set(n):n}(e)}function le(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return J(e)}var se,E,Z=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",$e=typeof Map!="undefined",Ue=typeof Set!="undefined",fe=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",he=Z?Symbol.for("immer-nothing"):((se={})["immer-nothing"]=!0,se),de=Z?Symbol.for("immer-draftable"):"__$immer_draftable",d=Z?Symbol.for("immer-state"):"__$immer_state",Ge=""+Object.prototype.constructor,Y=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,He=Object.getOwnPropertyDescriptors||function(e){var t={};return Y(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Ve={},H={get:function(e,t){if(t===d)return e;var r=O(e);if(!W(r,t))return function(o,i,a){var u,l=ce(i,a);return l?"value"in l?l.value:(u=l.get)===null||u===void 0?void 0:u.call(o.k):void 0}(e,r,t);var n=r[t];return e.I||!P(n)?n:n===z(e.t,t)?(K(e),e.o[t]=G(e.A.h,n,e)):n},has:function(e,t){return t in O(e)},ownKeys:function(e){return Reflect.ownKeys(O(e))},set:function(e,t,r){var n=ce(O(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=z(O(e),t),i=o==null?void 0:o[d];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(ze(r,o)&&(r!==void 0||W(e.t,t)))return!0;K(e),U(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return z(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,K(e),U(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=O(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){v(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){v(12)}},D={};S(H,function(e,t){D[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),D.deleteProperty=function(e,t){return D.set.call(this,e,t,void 0)},D.set=function(e,t,r){return H.set.call(this,e[0],t,r,e[0])};var Te=function(){function e(r){var n=this;this.O=fe,this.D=!0,this.produce=function(o,i,a){if(typeof o=="function"&&typeof i!="function"){var u=i;i=o;var l=n;return function(g){var me=this;g===void 0&&(g=u);for(var R=arguments.length,te=Array(R>1?R-1:0),B=1;B<R;B++)te[B-1]=arguments[B];return l.produce(g,function(ge){var re;return(re=i).call.apply(re,[me,ge].concat(te))})}}var c;if(typeof i!="function"&&v(6),a!==void 0&&typeof a!="function"&&v(7),P(o)){var s=ue(n),h=G(n,o,void 0),y=!0;try{c=i(h),y=!1}finally{y?k(s):$(s)}return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(g){return N(s,a),q(g,s)},function(g){throw k(s),g}):(N(s,a),q(c,s))}if(!o||typeof o!="object"){if((c=i(o))===void 0&&(c=o),c===he&&(c=void 0),n.D&&F(c,!0),a){var I=[],ee=[];b("Patches").M(o,c,I,ee),a(I,ee)}return c}v(21,o)},this.produceWithPatches=function(o,i){if(typeof o=="function")return function(c){for(var s=arguments.length,h=Array(s>1?s-1:0),y=1;y<s;y++)h[y-1]=arguments[y];return n.produceWithPatches(c,function(I){return o.apply(void 0,[I].concat(h))})};var a,u,l=n.produce(o,i,function(c,s){a=c,u=s});return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(c){return[c,a,u]}):[l,a,u]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){P(r)||v(8),x(r)&&(r=We(r));var n=ue(this),o=G(this,r,void 0);return o[d].C=!0,$(n),o},t.finishDraft=function(r,n){var o=r&&r[d],i=o.A;return N(i,n),q(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!fe&&v(20),this.O=r},t.applyPatches=function(r,n){var o;for(o=n.length-1;o>=0;o--){var i=n[o];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}o>-1&&(n=n.slice(o+1));var a=b("Patches").$;return x(r)?a(r,n):this.produce(r,function(u){return a(u,n)})},e}(),p=new Te,Xe=p.produce;p.produceWithPatches.bind(p);p.setAutoFreeze.bind(p);p.setUseProxies.bind(p);p.applyPatches.bind(p);p.createDraft.bind(p);p.finishDraft.bind(p);function pe(e){var t=w.exports.useState(function(){return F(typeof e=="function"?e():e,!0)}),r=t[1];return[t[0],w.exports.useCallback(function(n){r(typeof n=="function"?Xe(n):F(n))},[])]}function Je(e){const[t]=m.useForm(),[r,n]=w.exports.useState(!1);async function o(){n(!0),t.validate().then(async()=>{const i=await e.reqDel(e.params);i.code===0&&(ye.success(i.message),e.close(),t.resetFields(),e.reload())}).catch(i=>{console.log(i)}).finally(()=>{n(!1)})}return f(ve,{title:"\u5220\u9664\u786E\u8BA4",visible:e.visible,onCancel:e.close,confirmLoading:r,onOk:o,children:f(m,{form:t,children:f(m.Item,{label:"\u5220\u9664\u786E\u8BA4",field:"confirm",rules:[{validator(i,a){i!=="\u5220\u9664"?a("\u8BF7\u8F93\u5165 \u5220\u9664"):a()}}],children:f(L,{placeholder:"\u8BF7\u8F93\u5165 \u5220\u9664 \u4EE5\u786E\u8BA4\u5220\u9664"})})})})}function nt(){const e=w.exports.useRef(),[t,r]=pe({visible:!1,close:()=>{r(u=>{u.visible=!1})}}),[n,o]=pe({visible:!1,reqDel:Ie,close:()=>{o(u=>{u.visible=!1})},params:void 0});function i(u){const l=new Map,c=[];return u.forEach(s=>l.set(s.id,{...s,children:[]})),u.forEach(s=>{const h=l.get(s.pid);h?h.children.push(l.get(s.id)):c.push(l.get(s.id))}),c}const a=[{title:"\u540D\u5B57",dataIndex:"name"},{title:"\u64CD\u4F5C",key:"option",render:(u,l)=>j(Be,{children:[j(C,{type:"text",onClick:()=>{r(c=>{c.id=l.id,c.level=l.level,c.uuid=void 0,c.visible=!0})},children:[f(_e,{}),"\u521B\u5EFA"]}),j(C,{type:"text",onClick:()=>{r(c=>{c.id=void 0,c.level=void 0,c.uuid=l.uuid,c.visible=!0})},children:[f(Ae,{}),"\u4FEE\u6539"]}),j(C,{type:"text",onClick:()=>{o(c=>{c.params={uuid:l.uuid},c.visible=!0})},children:[f(ke,{}),"\u5220\u9664"]})]})}];return j(Ce,{children:[f(Ne,{visible:t.visible,id:t.id,level:t.level,uuid:t.uuid,close:t.close,reload:()=>e.current.reload()}),f(Je,{visible:n.visible,reqDel:n.reqDel,params:n.params,close:()=>{n.close()},reload:()=>e.current.reload()}),f(De,{ref:e,request:Ee,dataRender:i,columns:a,pagination:!1,pageSize:!1,toolBarRender:[f(C,{type:"primary",onClick:()=>{r(u=>{u.id=void 0,u.visible=!0,u.uuid=void 0})},children:"\u521B\u5EFA\u5206\u7C7B"},"create"),f(C,{type:"primary",onClick:()=>e.current.reload(),children:"\u5237\u65B0"},"delete")]})]})}export{nt as default};
