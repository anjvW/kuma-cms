import{r as a,a as t,d as y,j as l,B as n,k as g}from"./index.0122537b.js";import{S as m}from"./index.2debacdc.js";import"./index.f7bb5e72.js";import{C as x}from"./index.3ad98969.js";import{r as k,c as D}from"./index.b8fa13e6.js";import{I as L}from"./index.3ad88777.js";function B(){const[h,r]=a.exports.useState([]),[s,i]=a.exports.useState(!1),[c,d]=a.exports.useState(!1),[p,C]=a.exports.useState(10),[f,v]=a.exports.useState(50),o=async()=>{i(!0);const e=await k(f);e.code===0?r((e==null?void 0:e.data)||[]):r([]),i(!1)},b=async()=>{d(!0);try{(await D()).code===0&&o()}finally{d(!1)}};return a.exports.useEffect(()=>{o();const e=setInterval(()=>{o()},p*1e3);return()=>{clearInterval(e)}},[p,f]),t(x,{children:[t(y,{children:[l(m,{prefix:"\u5237\u65B0\u65F6\u95F4",placeholder:"\u9009\u62E9\u5237\u65B0\u65F6\u95F4",options:[{label:"3\u79D2",value:3},{label:"5\u79D2",value:5},{label:"10\u79D2",value:10},{label:"30\u79D2",value:30},{label:"60\u79D2",value:60}],defaultValue:10,onChange:C},"autoRefreshTime"),l(m,{prefix:"\u65E5\u5FD7\u884C\u6570",placeholder:"\u9009\u62E9\u65E5\u5FD7\u663E\u793A\u884C\u6570",options:[{label:"5\u884C",value:5},{label:"10\u884C",value:10},{label:"20\u884C",value:20},{label:"50\u884C",value:50},{label:"100\u884C",value:100}],defaultValue:50,allowClear:!0,onChange:v},"line"),l(n,{type:"primary",icon:s?l(g,{}):null,disabled:s,onClick:o,children:"\u5237\u65B0"},"refresh"),t(n,{type:"primary",icon:c?l(g,{}):null,disabled:c,onClick:b,children:[l(L,{}),"\u6E05\u7A7A\u65E5\u5FD7"]},"refresh"),l(n,{type:"primary",onClick:()=>{const e=document.createElement("a"),u=localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")).token:void 0;e.href=`/api/log/run/download?token=${u}`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:"\u65E5\u5FD7\u4E0B\u8F7D"},"download")]}),l("ol",{style:{height:"70vh",overflow:"auto",backgroundColor:"#f5f5f5",padding:"0"},children:h.map((e,u)=>t("li",{style:{listStyle:"none"},children:[t("span",{children:[u+1,"\xA0\xA0\xA0\xA0"]}),e]},u))})]})}export{B as default};
