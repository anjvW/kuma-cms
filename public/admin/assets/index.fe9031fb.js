import{r as u,C as we,u as Pe,m as _e,j as l,aa as $e,c as $,aq as Ae,a2 as De,a as k,F as ze,B as R,z as he,ar as Ge,e as b,a3 as He,as as Me,D as Oe,i as Ue,t as be,H as le,o as qe,l as Ke}from"./index.8f3ae58a.js";import{T as ce}from"./index.2568e243.js";import{T as We,I as Ee,a as Je,P as Qe,u as Xe,b as Ye}from"./index.3bf19886.js";import{C as Ze}from"./index.b1abcd55.js";import{P as er}from"./index.075db186.js";import{a as rr,C as tr}from"./index.8d48f761.js";import nr from"./index.0f3ca68b.js";import"./index.0af513b0.js";import"./index.17df09d3.js";var z=globalThis&&globalThis.__assign||function(){return z=Object.assign||function(r){for(var o,t=1,e=arguments.length;t<e;t++){o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=o[n])}return r},z.apply(this,arguments)},or=globalThis&&globalThis.__rest||function(r,o){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&o.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(r);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(r,e[n])&&(t[e[n]]=r[e[n]]);return t},ye=globalThis&&globalThis.__read||function(r,o){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var e=t.call(r),n,s=[],c;try{for(;(o===void 0||o-- >0)&&!(n=e.next()).done;)s.push(n.value)}catch(i){c={error:i}}finally{try{n&&!n.done&&(t=e.return)&&t.call(e)}finally{if(c)throw c.error}}return s},ir={position:"top",okType:"primary",icon:l(Ae,{}),blurToHide:!0,unmountOnExit:!0,trigger:"click",escToClose:!0};function ar(r,o){var t,e=u.exports.useContext(we),n=e.getPrefixCls,s=e.locale,c=e.componentConfig,i=e.rtl,a=Pe(r,ir,c==null?void 0:c.Popconfirm),T=a.style,v=a.className,y=a.children,I=a.position,m=a.getPopupContainer,F=a.blurToHide,_=a.unmountOnExit,O=a.trigger,L=a.escToClose,g=a.onVisibleChange,S=a.triggerProps,N=a.title,C=a.icon,G=a.okText,H=a.cancelText,J=a.okType,M=a.okButtonProps,Q=a.cancelButtonProps,X=a.autoFocus,Y=a.focusLock,x=a.content,ie=or(a,["style","className","children","position","getPopupContainer","blurToHide","unmountOnExit","trigger","escToClose","onVisibleChange","triggerProps","title","icon","okText","cancelText","okType","okButtonProps","cancelButtonProps","autoFocus","focusLock","content"]),Z=ye(_e(!1,{defaultValue:a.defaultPopupVisible,value:a.popupVisible}),2),E=Z[0],B=Z[1],ee=ye(u.exports.useState(!1),2),re=ee[0],A=ee[1],h=n("popconfirm"),w=!De(x),te=function(f){"popupVisible"in a||B(f),S&&S.onVisibleChange&&S.onVisibleChange(f),g&&g(f)},P=function(){te(!1)},U=function(f){P(),a.onCancel&&a.onCancel(f)},ae=function(f){var K=a.onOk||a.onConfirm,V;K&&(V=K(f)),V&&V.then&&(A(!0),V.then(function(){P()},function(j){A(!1),console.error(j)})),V||P()},q=function(){var f=k(ze,{children:[l(R,{...z({onClick:U,size:"mini"},Q),children:H||s.Popconfirm.cancelText}),l(R,{...z({loading:re,onClick:ae,size:"mini",type:J},M),children:G||s.Popconfirm.okText})]});return k("div",{className:h+"-wrapper",children:[k("div",{className:h+"-title",children:[C&&l("span",{className:h+"-title-icon",children:C}),l("div",{className:h+"-title-text",children:he(N)?N():N})]}),w&&l("div",{className:h+"-inner-content",children:he(x)?x():x}),Y?l(Ge,{returnFocus:!0,as:"div",className:h+"-btn",crossFrame:!1,disabled:!E,autoFocus:!!X,children:f}):l("div",{className:h+"-btn",children:f})]})};return u.exports.useEffect(function(){return!E&&re&&A(!1),function(){A(!1)}},[E]),l($e,{...z({},ie,{ref:o,style:z({maxWidth:350},T),className:$(v,(t={},t[h+"-rtl"]=i,t[h+"-has-content"]=w,t)),prefixCls:h,getPopupContainer:m,position:I,trigger:O,escToClose:L,popupVisible:E,content:q,unmountOnExit:_,blurToHide:F,popupHoverStay:!0,triggerProps:S,onVisibleChange:te,childrenPrefix:h}),children:typeof y=="string"?l("span",{children:y}):y})}var Te=u.exports.forwardRef(ar);Te.displayName="Popconfirm";var sr=Te;function Ie(r){var o=r.title,t=r.description,e=r.actions,n=o||t,s=e&&e.length,c=n||s;return[c,n,s]}var lr=globalThis&&globalThis.__read||function(r,o){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var e=t.call(r),n,s=[],c;try{for(;(o===void 0||o-- >0)&&!(n=e.next()).done;)s.push(n.value)}catch(i){c={error:i}}finally{try{n&&!n.done&&(t=e.return)&&t.call(e)}finally{if(c)throw c.error}}return s},cr=function(r){var o,t=r.style,e=r.className,n=r.title,s=r.description,c=r.actions,i=r.prefixCls,a=r.simple,T=lr(Ie({title:n,description:s,actions:c}),3),v=T[0],y=T[1],I=T[2];if(!v)return null;var m=i+"-footer",F=$(m,e,(o={},o[m+"-with-actions"]=I,o)),_=function(){var O=b.createElement("div",{className:i+"-actions-list"},c.map(function(L,g){return b.createElement("div",{className:i+"-actions-item",key:""+g},L)}));return a?b.createElement("div",{className:i+"-actions-list"},b.createElement(We,{prefixCls:i,popup:function(){return O}},b.createElement("div",{className:$(i+"-actions-item",i+"-actions-item-trigger")},b.createElement("span",null,b.createElement(He,null))))):O};return b.createElement("div",{className:F,style:t},y&&b.createElement("div",{className:$(m+"-block",i+"-caption")},n&&b.createElement("div",{className:i+"-caption-title",title:n},n),s&&!a&&b.createElement("div",{className:i+"-caption-description",title:s},s)),I&&b.createElement("div",{className:$(m+"-block",i+"-actions")},_()))},Ne=!Me&&!Oe(window==null?void 0:window.IntersectionObserver);function ur(r,o){o===void 0&&(o={});var t=u.exports.useRef(),e=function(){t.current&&(t.current.disconnect(),t.current=null)},n=function(s){s&&(e(),Ne&&(t.current=new IntersectionObserver(r,o),t.current.observe(s)))};return{observer:t.current,cor:n,dor:e}}var dr=globalThis&&globalThis.__rest||function(r,o){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&o.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(r);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(r,e[n])&&(t[e[n]]=r[e[n]]);return t},Ce=globalThis&&globalThis.__read||function(r,o){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var e=t.call(r),n,s=[],c;try{for(;(o===void 0||o-- >0)&&!(n=e.next()).done;)s.push(n.value)}catch(i){c={error:i}}finally{try{n&&!n.done&&(t=e.return)&&t.call(e)}finally{if(c)throw c.error}}return s};function fr(r){var o=r.defaultInView,t=r.unobserverOnEnter,e=t===void 0?!0:t,n=r.onChange,s=r.target,c=dr(r,["defaultInView","unobserverOnEnter","onChange","target"]),i=Ce(u.exports.useState(Ne?o:!0),2),a=i[0],T=i[1],v=u.exports.useCallback(function(_,O){var L=Ce(_,1),g=L[0],S=O.thresholds.some(function(C){return g.intersectionRatio>=C}),N=S&&g.isIntersecting;T(N),n==null||n(N,g),N&&e&&O.unobserve(g.target)},[n,e]),y=ur(v,c),I=y.cor,m=y.dor,F=y.observer;return u.exports.useEffect(function(){var _=o&&e;return _?m():s&&I(s),m},[s,o,e]),{inView:a,observer:F}}var W=globalThis&&globalThis.__assign||function(){return W=Object.assign||function(r){for(var o,t=1,e=arguments.length;t<e;t++){o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=o[n])}return r},W.apply(this,arguments)},pr=globalThis&&globalThis.__rest||function(r,o){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&o.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(r);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(r,e[n])&&(t[e[n]]=r[e[n]]);return t},xe=globalThis&&globalThis.__read||function(r,o){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var e=t.call(r),n,s=[],c;try{for(;(o===void 0||o-- >0)&&!(n=e.next()).done;)s.push(n.value)}catch(i){c={error:i}}finally{try{n&&!n.done&&(t=e.return)&&t.call(e)}finally{if(c)throw c.error}}return s},ue=0,vr={footerPosition:"inner",preview:!0};function mr(r,o){var t,e=u.exports.useContext(we),n=e.getPrefixCls,s=e.componentConfig,c=e.rtl,i=Pe(r,vr,s==null?void 0:s.Image),a=i.style,T=i.className,v=i.src,y=i.width,I=i.height,m=i.title,F=i.description,_=i.actions,O=i.footerPosition,L=i.simple,g=i.loader,S=i.loaderClassName,N=i.error,C=i.preview,G=i.previewProps,H=i.alt,J=i.onClick,M=i.index,Q=i._index,X=i.onError,Y=i.onLoad,x=i.lazyload,ie=pr(i,["style","className","src","width","height","title","description","actions","footerPosition","simple","loader","loaderClassName","error","preview","previewProps","alt","onClick","index","_index","onError","onLoad","lazyload"]),Z=Ue(),E=u.exports.useContext(Qe),B=E.previewGroup,ee=E.handleVisibleChange,re=E.registerPreviewUrl,A=E.registerPreviewProps,h=E.setCurrentIndex,w=u.exports.useMemo(function(){return be(G)?G:{}},[G]),te=u.exports.useMemo(function(){return be(x)?x:{}},[x]),P=u.exports.useMemo(function(){return le(M)||le(Q)?(ue=le(M)?M:Q,ue):ue++},[]),U=w.src||v,ae=xe(Ie({title:m,description:F,actions:_}),1),q=ae[0],f=Xe("beforeLoad"),K=f.isLoading,V=f.isError,j=f.isLoaded,Ve=f.isBeforeLoad,ne=f.setStatus,de=xe(_e(!1,{defaultValue:w.defaultVisible,value:w.visible}),2),fe=de[0],ke=de[1],se=u.exports.useMemo(function(){return qe(w,["visible","defaultVisible","src","onVisibleChange"])},[w]),d=n("image"),Fe=!Oe(w.visible),Le=$(d,(t={},t[d+"-rtl"]=c,t[d+"-simple"]=L,t[d+"-before-load"]=Ve,t[d+"-loading"]=K,t[d+"-loading-error"]=V,t[d+"-with-footer-inner"]=j&&q&&O==="inner",t[d+"-with-footer-outer"]=j&&q&&O==="outer",t[d+"-with-preview"]=j&&C&&!V&&!Fe,t),T),D=u.exports.useRef();function Se(p){ne("loaded"),Y&&Y(p)}function je(p){ne("error"),X&&X(p)}function pe(p){C&&B?(h(P),ee(!0)):C&&ve(!0),J&&J(p)}function ve(p){w.onVisibleChange&&w.onVisibleChange(p,fe),ke(p)}var me=fr(W({target:D.current,defaultInView:!x},te)).inView;u.exports.useEffect(function(){D.current&&(me?(D.current.src||v)&&D.current.src!==v&&(D.current.src=v,ne("loading")):ne("lazyload"))},[v,me]),u.exports.useEffect(function(){if(!!B){var p=A(P,se);return function(){return p(P)}}},[P,B,se]),u.exports.useEffect(function(){if(!!B){var p=re(P,U,C);return function(){return p(P)}}},[P,B,U,C]);var Be=k("div",{className:d+"-error",children:[l("div",{className:d+"-error-icon",children:l(Ye,{})}),H&&l("div",{className:d+"-error-alt",children:H})]}),ge=l("div",{className:$(d+"-loader",S),children:k("div",{className:d+"-loader-spin",children:[l(Ke,{}),l("div",{className:d+"-loader-spin-text",children:"Loading"})]})}),Re=function(){if(g===!0)return ge;var p=g||ge;return x||g?p:null};return k("div",{className:Le,style:Object.assign({width:y,height:I},a),ref:o,children:[l("img",{...W({ref:D,className:d+"-img",tabIndex:0},Z({onPressEnter:pe}),ie,x||v===void 0?{}:{src:v},{title:m,width:y,height:I,onLoad:Se,onError:je,onClick:pe,alt:H})}),!j&&k("div",{className:d+"-overlay",children:[V&&(N||Be),K&&Re()]}),j&&q&&l(cr,{title:m,description:F,actions:_,prefixCls:d,simple:L}),j&&C&&l(Ee,{...W({visible:fe,src:U},se,{onVisibleChange:ve})})]})}var gr=b.forwardRef(mr),oe=gr;oe.Preview=Ee;oe.PreviewGroup=Je;oe.displayName="Image";var hr=oe;function Tr(){const r=u.exports.useRef();return k(Ze,{children:[l(nr,{visible:!1,uuid:void 0,close:()=>{},loading:!1,tableResert:()=>{}}),l(er,{ref:r,request:rr,columns:[{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0,search:!0},{title:"\u5206\u7C7B",dataIndex:"cid",search:!0},{title:"\u4F5C\u8005",dataIndex:"author"},{title:"\u53D1\u5E03\u72B6\u6001",dataIndex:"is_published",render(t,e,n){return e.is_published===1?l(ce,{color:"green",children:"\u5DF2\u53D1\u5E03"}):e.is_published===0?l(ce,{color:"gray",children:"\u672A\u53D1\u5E03"}):l(ce,{color:"red",children:"\u72B6\u6001\u5F02\u5E38"})}},{title:"\u53D1\u5E03\u65F6\u95F4",width:200,dataIndex:"published_at"},{title:"\u5C01\u9762\u56FE\u7247",width:150,dataIndex:"cover_pic",render:(t,e)=>e.cover_image?l(hr,{width:20,src:e.cover_image,alt:"\u5C01\u9762\u56FE"}):"\u6682\u65E0\u5C01\u9762"},{title:"\u64CD\u4F5C",width:250,render:(t,e,n)=>k(tr,{children:[l(R,{type:"text",children:"\u67E5\u770B"}),l(sr,{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",children:l(R,{type:"text",status:"warning",children:"\u5220\u9664"})}),l(R,{type:"text",status:"danger",children:"\u5371\u9669"})]})}],toolBarRender:[l(R,{type:"primary",children:"\u521B\u5EFA\u6587\u7AE0"},"create"),l(R,{type:"primary",onClick:()=>r.current.reload(),children:"\u5237\u65B0"},"delete")]})]})}export{Tr as default};
