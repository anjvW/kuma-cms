import{c as L,e as f,a3 as Te,aq as Fe,D as de,r as c,C as Se,u as je,i as Be,t as le,H as J,m as ke,o as Re,j as s,a as T,l as Ae,B as k}from"./index.7678418b.js";import{T as Q}from"./index.8f6fcdc8.js";import{a as De,C as Ge,P as Me}from"./index.c402e774.js";import{T as ze,I as fe,a as $e,P as Ue,u as qe,b as Ke}from"./index.1c576979.js";import{C as He}from"./index.84664a99.js";import{P as Je}from"./index.91a608e6.js";import Qe from"./index.1afee7f5.js";import"./index.43606bdf.js";import"./index.5a6422a6.js";function ve(r){var o=r.title,t=r.description,e=r.actions,i=o||t,a=e&&e.length,l=i||a;return[l,i,a]}var We=globalThis&&globalThis.__read||function(r,o){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var e=t.call(r),i,a=[],l;try{for(;(o===void 0||o-- >0)&&!(i=e.next()).done;)a.push(i.value)}catch(n){l={error:n}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(l)throw l.error}}return a},Xe=function(r){var o,t=r.style,e=r.className,i=r.title,a=r.description,l=r.actions,n=r.prefixCls,E=r.simple,x=We(ve({title:i,description:a,actions:l}),3),v=x[0],h=x[1],C=x[2];if(!v)return null;var m=n+"-footer",I=L(m,e,(o={},o[m+"-with-actions"]=C,o)),g=function(){var b=f.createElement("div",{className:n+"-actions-list"},l.map(function(P,p){return f.createElement("div",{className:n+"-actions-item",key:""+p},P)}));return E?f.createElement("div",{className:n+"-actions-list"},f.createElement(ze,{prefixCls:n,popup:function(){return b}},f.createElement("div",{className:L(n+"-actions-item",n+"-actions-item-trigger")},f.createElement("span",null,f.createElement(Te,null))))):b};return f.createElement("div",{className:I,style:t},h&&f.createElement("div",{className:L(m+"-block",n+"-caption")},i&&f.createElement("div",{className:n+"-caption-title",title:i},i),a&&!E&&f.createElement("div",{className:n+"-caption-description",title:a},a)),C&&f.createElement("div",{className:L(m+"-block",n+"-actions")},g()))},me=!Fe&&!de(window==null?void 0:window.IntersectionObserver);function Ye(r,o){o===void 0&&(o={});var t=c.exports.useRef(),e=function(){t.current&&(t.current.disconnect(),t.current=null)},i=function(a){a&&(e(),me&&(t.current=new IntersectionObserver(r,o),t.current.observe(a)))};return{observer:t.current,cor:i,dor:e}}var Ze=globalThis&&globalThis.__rest||function(r,o){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&o.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,e=Object.getOwnPropertySymbols(r);i<e.length;i++)o.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(r,e[i])&&(t[e[i]]=r[e[i]]);return t},ue=globalThis&&globalThis.__read||function(r,o){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var e=t.call(r),i,a=[],l;try{for(;(o===void 0||o-- >0)&&!(i=e.next()).done;)a.push(i.value)}catch(n){l={error:n}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(l)throw l.error}}return a};function er(r){var o=r.defaultInView,t=r.unobserverOnEnter,e=t===void 0?!0:t,i=r.onChange,a=r.target,l=Ze(r,["defaultInView","unobserverOnEnter","onChange","target"]),n=ue(c.exports.useState(me?o:!0),2),E=n[0],x=n[1],v=c.exports.useCallback(function(g,b){var P=ue(g,1),p=P[0],G=b.thresholds.some(function(w){return p.intersectionRatio>=w}),F=G&&p.isIntersecting;x(F),i==null||i(F,p),F&&e&&b.unobserve(p.target)},[i,e]),h=Ye(v,l),C=h.cor,m=h.dor,I=h.observer;return c.exports.useEffect(function(){var g=o&&e;return g?m():a&&C(a),m},[a,o,e]),{inView:E,observer:I}}var R=globalThis&&globalThis.__assign||function(){return R=Object.assign||function(r){for(var o,t=1,e=arguments.length;t<e;t++){o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r},R.apply(this,arguments)},rr=globalThis&&globalThis.__rest||function(r,o){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&o.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,e=Object.getOwnPropertySymbols(r);i<e.length;i++)o.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(r,e[i])&&(t[e[i]]=r[e[i]]);return t},ce=globalThis&&globalThis.__read||function(r,o){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var e=t.call(r),i,a=[],l;try{for(;(o===void 0||o-- >0)&&!(i=e.next()).done;)a.push(i.value)}catch(n){l={error:n}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(l)throw l.error}}return a},W=0,tr={footerPosition:"inner",preview:!0};function ir(r,o){var t,e=c.exports.useContext(Se),i=e.getPrefixCls,a=e.componentConfig,l=e.rtl,n=je(r,tr,a==null?void 0:a.Image),E=n.style,x=n.className,v=n.src,h=n.width,C=n.height,m=n.title,I=n.description,g=n.actions,b=n.footerPosition,P=n.simple,p=n.loader,G=n.loaderClassName,F=n.error,w=n.preview,M=n.previewProps,z=n.alt,X=n.onClick,$=n.index,Y=n._index,Z=n.onError,ee=n.onLoad,O=n.lazyload,pe=rr(n,["style","className","src","width","height","title","description","actions","footerPosition","simple","loader","loaderClassName","error","preview","previewProps","alt","onClick","index","_index","onError","onLoad","lazyload"]),he=Be(),S=c.exports.useContext(Ue),j=S.previewGroup,ge=S.handleVisibleChange,be=S.registerPreviewUrl,we=S.registerPreviewProps,ye=S.setCurrentIndex,y=c.exports.useMemo(function(){return le(M)?M:{}},[M]),xe=c.exports.useMemo(function(){return le(O)?O:{}},[O]),_=c.exports.useMemo(function(){return J($)||J(Y)?(W=J($)?$:Y,W):W++},[]),U=y.src||v,Ce=ce(ve({title:m,description:I,actions:g}),1),q=Ce[0],B=qe("beforeLoad"),re=B.isLoading,K=B.isError,N=B.isLoaded,_e=B.isBeforeLoad,A=B.setStatus,te=ce(ke(!1,{defaultValue:y.defaultVisible,value:y.visible}),2),ie=te[0],Ee=te[1],H=c.exports.useMemo(function(){return Re(y,["visible","defaultVisible","src","onVisibleChange"])},[y]),u=i("image"),Ie=!de(y.visible),Pe=L(u,(t={},t[u+"-rtl"]=l,t[u+"-simple"]=P,t[u+"-before-load"]=_e,t[u+"-loading"]=re,t[u+"-loading-error"]=K,t[u+"-with-footer-inner"]=N&&q&&b==="inner",t[u+"-with-footer-outer"]=N&&q&&b==="outer",t[u+"-with-preview"]=N&&w&&!K&&!Ie,t),x),V=c.exports.useRef();function Oe(d){A("loaded"),ee&&ee(d)}function Ne(d){A("error"),Z&&Z(d)}function ne(d){w&&j?(ye(_),ge(!0)):w&&oe(!0),X&&X(d)}function oe(d){y.onVisibleChange&&y.onVisibleChange(d,ie),Ee(d)}var ae=er(R({target:V.current,defaultInView:!O},xe)).inView;c.exports.useEffect(function(){V.current&&(ae?(V.current.src||v)&&V.current.src!==v&&(V.current.src=v,A("loading")):A("lazyload"))},[v,ae]),c.exports.useEffect(function(){if(!!j){var d=we(_,H);return function(){return d(_)}}},[_,j,H]),c.exports.useEffect(function(){if(!!j){var d=be(_,U,w);return function(){return d(_)}}},[_,j,U,w]);var Ve=T("div",{className:u+"-error",children:[s("div",{className:u+"-error-icon",children:s(Ke,{})}),z&&s("div",{className:u+"-error-alt",children:z})]}),se=s("div",{className:L(u+"-loader",G),children:T("div",{className:u+"-loader-spin",children:[s(Ae,{}),s("div",{className:u+"-loader-spin-text",children:"Loading"})]})}),Le=function(){if(p===!0)return se;var d=p||se;return O||p?d:null};return T("div",{className:Pe,style:Object.assign({width:h,height:C},E),ref:o,children:[s("img",{...R({ref:V,className:u+"-img",tabIndex:0},he({onPressEnter:ne}),pe,O||v===void 0?{}:{src:v},{title:m,width:h,height:C,onLoad:Oe,onError:Ne,onClick:ne,alt:z})}),!N&&T("div",{className:u+"-overlay",children:[K&&(F||Ve),re&&Le()]}),N&&q&&s(Xe,{title:m,description:I,actions:g,prefixCls:u,simple:P}),N&&w&&s(fe,{...R({visible:ie,src:U},H,{onVisibleChange:oe})})]})}var nr=f.forwardRef(ir),D=nr;D.Preview=fe;D.PreviewGroup=$e;D.displayName="Image";var or=D;function pr(){const r=c.exports.useRef();return T(He,{children:[s(Qe,{visible:!1,uuid:void 0,close:()=>{},loading:!1,tableResert:()=>{}}),s(Je,{ref:r,request:De,columns:[{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0,search:!0},{title:"\u5206\u7C7B",dataIndex:"cid",search:!0},{title:"\u4F5C\u8005",dataIndex:"author"},{title:"\u53D1\u5E03\u72B6\u6001",dataIndex:"is_published",render(t,e,i){return e.is_published===1?s(Q,{color:"green",children:"\u5DF2\u53D1\u5E03"}):e.is_published===0?s(Q,{color:"gray",children:"\u672A\u53D1\u5E03"}):s(Q,{color:"red",children:"\u72B6\u6001\u5F02\u5E38"})}},{title:"\u53D1\u5E03\u65F6\u95F4",width:200,dataIndex:"published_at"},{title:"\u5C01\u9762\u56FE\u7247",width:150,dataIndex:"cover_pic",render:(t,e)=>e.cover_image?s(or,{width:20,src:e.cover_image,alt:"\u5C01\u9762\u56FE"}):"\u6682\u65E0\u5C01\u9762"},{title:"\u64CD\u4F5C",width:250,render:(t,e,i)=>T(Ge,{children:[s(k,{type:"text",children:"\u67E5\u770B"}),s(Me,{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",children:s(k,{type:"text",status:"warning",children:"\u5220\u9664"})}),s(k,{type:"text",status:"danger",children:"\u5371\u9669"})]})}],toolBarRender:[s(k,{type:"primary",children:"\u521B\u5EFA\u6587\u7AE0"},"create"),s(k,{type:"primary",onClick:()=>r.current.reload(),children:"\u5237\u65B0"},"delete")]})]})}export{pr as default};
