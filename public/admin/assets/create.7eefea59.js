import{h as u,au as n,at as t,r as c,j as a,b2 as f,a as p,b1 as h}from"./index.0c640675.js";import{U as E}from"./index.fe04f149.js";import{a as d}from"./index.6d025cd8.js";import"./index.708c5e25.js";function w(){return u.post("/api/carousel/query",{})}function b(e){return u.post("/api/carousel/create",e)}function C(e){return u.post("/api/carousel/update",e)}function L(e){return u.post("/api/carousel/delete",{uuid:e})}function j(e){return u.post("/api/carousel/enable",{uuid:e})}function k(e){return u.post("/api/carousel/disable",{uuid:e})}function S(e){return u.post("/api/carousel/detail",{uuid:e})}function _(){return u.post("/api/link/target",{})}const A="_carouselCreate_1whd8_1";var F={carouselCreate:A};const x=n.TextArea;function B(e){const[l]=t.useForm(),[m,o]=c.exports.useState(!1);async function g(){l.validate().then(async i=>{o(!0);const r={...i,image:i.image&&i.image.length!==0?i.image[0].response.data.name:void 0};let s;try{e.data?s=await C({...r,uuid:e.data.uuid}):s=await b(r),s.code===0&&(l.clearFields(),e.reload(),e.close())}finally{o(!1)}})}return c.exports.useEffect(()=>{if(e.data){const{status:i,image:r}=e.data;let s="";s=r,l.setFieldsValue({...e.data,status:i===1?"true":"false",image:r?[{uid:e,url:s,response:{data:{name:r.replace("/media/image?n=",""),path:r}}}]:[]})}else l.clearFields();return()=>{l.clearFields()}},[e.data]),a(f,{className:F.carouselCreate,width:500,visible:e.visible,title:e.data?"\u66F4\u65B0\u8F6E\u64AD\u56FE":"\u521B\u5EFA\u8F6E\u64AD\u56FE",onOk:g,onCancel:e.close,confirmLoading:m,okText:e.data?"\u4FDD\u5B58":"\u521B\u5EFA",unmountOnExit:!0,children:p(t,{form:l,children:[a(t.Item,{field:"image",triggerPropName:"fileList",wrapperCol:{span:24},rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247"}],children:a(E,{action:"/api/upload/image",data:{token:JSON.parse(localStorage.getItem("token")).token},imagePreview:!0,accept:"image/png, image/jpg, image/jpeg",listType:"picture-card",limit:1,className:F.upload,style:{width:"100%",aspectRatio:"1/1"}})}),a(t.Item,{label:"\u8F6E\u64AD\u56FE\u6807\u9898",field:"title",children:a(n,{maxLength:100,placeholder:"\u8F6E\u64AD\u56FE\u6807\u9898"})}),a(t.Item,{label:"\u8F6E\u64AD\u56FE\u63CF\u8FF0",field:"description",children:a(x,{maxLength:200,placeholder:"\u8F6E\u64AD\u56FE\u63CF\u8FF0",showWordLimit:!0,autoSize:!0,style:{minHeight:64}})}),a(t.Item,{label:"\u8DF3\u8F6C\u94FE\u63A5",field:"link",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8DF3\u8F6C\u94FE\u63A5"}],children:a(n,{maxLength:200,placeholder:"\u8BF7\u586B\u5199\u8DF3\u8F6C\u94FE\u63A5"})}),a(t.Item,{label:"\u8DF3\u8F6C\u65B9\u5F0F",field:"target",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8DF3\u8F6C\u65B9\u5F0F"}],children:a(d,{options:e.target})}),a(t.Item,{label:"\u542F\u7528\u72B6\u6001",field:"status",children:a(d,{options:[{label:"\u663E\u793A",value:"true"},{label:"\u9690\u85CF",value:"false"}]})}),a(t.Item,{label:"\u6392\u5E8F",field:"sortIndex",children:a(h,{precision:0,hideControl:!0,maxLength:2})})]})})}var q=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));export{B as C,S as a,q as c,k as d,j as e,w as q,L as r,_ as t};
