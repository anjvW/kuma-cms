import{ae as l,ao as v,au as u,r as s,j as e,B as p,a as o,M as E}from"./index.5f43b6ab.js";import{T as g}from"./index.5c13cc3b.js";import{S as F}from"./index.4f7c900b.js";import"./index.1675b94f.js";import{C as T}from"./index.084ff5a4.js";import{C as z,s as M,t as J,l as N,a as O,b as j}from"./cache.b790aeab.js";const c=l.TextArea,n=g.TabPane,G=v.Group;function $(){const[r]=u.useForm(),[C,d]=s.exports.useState(!1),[y,m]=s.exports.useState(!1),[A,f]=s.exports.useState(!1),[h,b]=s.exports.useState("\u57FA\u7840\u8BBE\u7F6E"),[_,S]=s.exports.useState([]),[D,x]=s.exports.useState([]);async function B(){d(!0);try{const t=await M(),{sitemap_type:a,sitemap_additional_link:i}=t.data;r.setFieldsValue({...t.data,sitemap_type:a?JSON.parse(a):void 0,sitemap_additional_link:i?JSON.parse(i).join(`
`):void 0})}finally{d(!1)}}async function I(){try{const t=await J();if(t.code===0){const a=t.data.list.map(i=>({label:i,value:i}));S(a)}}catch{}}async function w(){try{const t=await N();if(t.code===0){const a=t.data.language.map(i=>({label:i,value:i}));x(a)}}catch{}}function k(){r.validate().then(async t=>{for(const a in t)t[a]?a==="sitemap_type"?(delete t[a],t[a]=JSON.stringify(t[a])):a==="sitemap_additional_link"&&delete t[a]:delete t[a];m(!0);try{const a=await O(t);a.code===0&&E.success(a.message)}catch{}finally{m(!1)}}).catch(t=>{console.log(t)})}function L(){f(!0);const t=JSON.stringify(r.getFieldValue("sitemap_type")),a=JSON.stringify(r.getFieldValue("sitemap_additional_link").split(`
`).filter(i=>i));j({sitemapType:t,additionalLink:a}).then(i=>{E.success(i.message)}).finally(()=>{f(!1)})}return s.exports.useEffect(()=>{B(),I(),w()},[]),e(T,{actions:(()=>{switch(h){case"\u7F13\u5B58\u8BBE\u7F6E":return[];case"\u7F51\u7AD9\u5730\u56FE":return[e(p,{type:"primary",loading:A,onClick:L,children:"\u8BBE\u7F6E\u7F51\u7AD9\u5730\u56FE"},"refresh")];default:return[e(p,{type:"primary",loading:C,onClick:B,children:"\u5237\u65B0"},"refresh"),e(p,{type:"primary",loading:y,onClick:k,children:"\u4FDD\u5B58"},"update")]}})(),children:e(u,{form:r,layout:"horizontal",labelCol:{span:2},wrapperCol:{span:8},children:o(g,{activeTab:h,onChange:b,children:[o(n,{title:"\u57FA\u7840\u8BBE\u7F6E",children:[e(u.Item,{label:"\u7AD9\u70B9\u540D\u79F0",field:"site_name",children:e(l,{})}),e(u.Item,{label:"\u7AD9\u70B9\u5730\u5740",field:"site_url",children:e(l,{})}),e(u.Item,{label:"\u7AD9\u70B9\u5173\u952E\u8BCD",field:"site_keywords",children:e(l,{})}),e(u.Item,{label:"\u7AD9\u70B9\u63CF\u8FF0",field:"site_description",children:e(c,{autoSize:!0})}),e(u.Item,{label:"\u670D\u52A1\u70ED\u7EBF",field:"service_phone",wrapperCol:{span:4},children:e(l,{})}),e(u.Item,{label:"\u670D\u52A1\u90AE\u7BB1",field:"service_email",wrapperCol:{span:4},rules:[{validator(t,a){t&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)||a("\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E"))}}],children:e(l,{})}),e(u.Item,{label:"\u7248\u6743",field:"copyright",children:e(l,{})})]},"\u57FA\u7840\u8BBE\u7F6E"),e(n,{title:"\u4E3B\u9898\u8BBE\u7F6E",children:e(u.Item,{label:"\u4E3B\u9898",field:"theme",labelCol:{span:1},wrapperCol:{span:4},children:e(F,{options:_})})},"\u4E3B\u9898\u8BBE\u7F6E"),e(n,{title:"\u8BED\u8A00\u8BBE\u7F6E",children:e(u.Item,{label:"\u8BED\u8A00",field:"language",labelCol:{span:1},wrapperCol:{span:4},children:e(F,{options:D})})},"\u8BED\u8A00\u8BBE\u7F6E"),o(n,{title:"\u5907\u6848\u4FE1\u606F",children:[e(u.Item,{label:"ICP\u5907\u6848",field:"icp",children:e(l,{})}),e(u.Item,{label:"\u516C\u5B89\u5907\u6848",field:"police_record",children:e(l,{})})]},"\u5907\u6848\u4FE1\u606F"),o(n,{title:"\u811A\u672C\u4EE3\u7801",children:[e(u.Item,{label:"\u7EDF\u8BA1\u811A\u672C",field:"statistical_script",wrapperCol:{span:22},children:e(c,{autoSize:!0,style:{minHeight:180}})}),e(u.Item,{label:"\u5BA2\u670D\u811A\u672C",field:"service_script",wrapperCol:{span:22},children:e(c,{autoSize:!0,style:{minHeight:180}})})]},"\u811A\u672C\u4EE3\u7801"),o(n,{title:"\u7F51\u7AD9\u5730\u56FE",children:[e(u.Item,{label:"\u751F\u6210\u7C7B\u578B",field:"sitemap_type",wrapperCol:{span:10},children:e(G,{options:["txt","xml"]})}),e(u.Item,{label:"\u9644\u52A0\u94FE\u63A5",field:"sitemap_additional_link",wrapperCol:{span:22},children:e(c,{autoSize:!0,style:{minHeight:180}})})]},"\u7F51\u7AD9\u5730\u56FE"),e(n,{title:"\u7F13\u5B58\u8BBE\u7F6E",children:e(z,{})},"\u7F13\u5B58\u8BBE\u7F6E")]})})})}export{$ as default};
