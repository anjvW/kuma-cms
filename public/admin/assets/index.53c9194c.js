import{h as f,ae as l,au as a,r as m,j as e,H as x,B as d,a as u,bg as E,F as D}from"./index.8e12ee71.js";import{C as y}from"./index.a42c5e8f.js";import{P as g}from"./index.4d5bd90d.js";import{i as v,C as O,D as F}from"./use-immer.module.10f7d191.js";import{c as A}from"./convertNullToUndefined.a19d8223.js";import{I as P}from"./index.68788f67.js";import{I as w}from"./index.fcfacb79.js";import"./index.7600771c.js";import"./index.5133a6c6.js";import"./index.f3f27e35.js";import"./index.20860099.js";import"./index.cc7e4338.js";function k(t){return f.post("/api/message/query",t)}function j(t){return f.post("/api/message/detail",t)}function q(t){return f.post("/api/message/delete",t)}const S=l.TextArea;function T(t){const[r]=a.useForm();return m.exports.useEffect(()=>{if(t.data){const c=A(t.data);r.setFieldsValue({...c})}},[t.data]),m.exports.useEffect(()=>{t.visible===!1&&r.resetFields()},[r,t.visible]),e(y,{title:"\u6D88\u606F\u8BE6\u60C5",extra:e(x,{style:{cursor:"point",color:"#333",fontSize:"16px"},onClick:()=>t.close()}),actions:[e(d,{type:"default",onClick:()=>t.close(),children:"\u5173\u95ED"},"cancel")],children:u(a,{form:r,labelCol:{span:2},wrapperCol:{span:8},children:[e(a.Item,{label:"\u540D\u5B57",field:"name",children:e(l,{readOnly:!0})}),e(a.Item,{label:"\u624B\u673A",field:"phone",children:e(l,{readOnly:!0})}),e(a.Item,{label:"\u90AE\u7BB1",field:"email",children:e(l,{readOnly:!0})}),e(a.Item,{label:"\u6765\u6E90",field:"source",children:e(l,{readOnly:!0})}),e(a.Item,{label:"\u72B6\u6001",field:"status",children:e(l,{readOnly:!0})}),e(a.Item,{label:"\u4F01\u4E1A",field:"company",children:e(l,{readOnly:!0})}),e(a.Item,{label:"\u4E3B\u9898",field:"subject",children:e(l,{readOnly:!0})}),e(a.Item,{label:"\u5185\u5BB9",field:"content",wrapperCol:{span:22},children:e(S,{autoSize:!0,style:{minHeight:64},readOnly:!0})})]})})}function Q(){const t=E(),r=new URLSearchParams(t.search),c=r.get("name"),b=r.get("phone"),B=r.get("email"),s=m.exports.useRef(),[n,p]=v({visible:!1,close:function(){p(o=>{o.visible=!1})}});async function I(o){try{const i=await j({uuid:o});i.code===0&&p(h=>{h.data=i.data,h.visible=!0})}catch{}}const C=[{title:"\u5173\u952E\u8BCD",dataIndex:"keyword",search:!0,hide:!0},{title:"\u540D\u5B57",dataIndex:"name",ellipsis:!0,search:!0,initialValue:c,fieldProps:{readOnly:!0}},{title:"\u624B\u673A",dataIndex:"phone",search:!0,initialValue:b,fieldProps:{readOnly:!0}},{title:"\u90AE\u7BB1",dataIndex:"email",search:!0,initialValue:B,fieldProps:{readOnly:!0}},{title:"\u4F01\u4E1A",dataIndex:"company"},{title:"\u6765\u6E90",dataIndex:"source"},{title:"\u72B6\u6001",dataIndex:"status"},{title:"\u64CD\u4F5C",width:280,render:(o,i)=>u(O,{children:[u(d,{type:"text",onClick:()=>I(i.uuid),children:[e(P,{}),"\u8BE6\u60C5"]}),e(F,{reqDel:q,params:{uuid:i.uuid},reload:()=>s.current.reload(),children:u(d,{type:"text",children:[e(w,{}),"\u5220\u9664"]})})]})}];return u(D,{children:[n.visible&&e(T,{visible:n.visible,data:n.data,close:()=>n.close(),reload:()=>s.current.reload()}),e(y,{style:{display:n.visible?"none":void 0},children:e(g,{ref:s,request:k,columns:C,immediateSearch:!0,actionBarRender:[e(d,{type:"primary",onClick:()=>s.current.reload(),children:"\u5237\u65B0"},"refresh")]})})]})}export{Q as default};
