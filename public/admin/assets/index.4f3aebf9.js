import{b9 as ar,z as q,r as g,C as _e,H as ir,j as k,p as lr,e as Se,c as J,ax as or,a as G,F as sr,l as cr,ba as ur,k as dr,I as fr,al as hr,D as Pe,ay as z,bb as vr,s as de,A as yr,t as ke,a6 as Ie,K as gr,w as pr,W as br,u as kr,L as xr,m as je,X as _r,a7 as Cr,ah as mr,a0 as Kr,a4 as wr,a5 as Sr,ac as se,b7 as Nr,ad as Fe,bc as Dr,af as Or,at as Pr,B as pe,bd as Tr}from"./index.40e87f26.js";import{C as Er}from"./index.1891e7b9.js";import{P as Ir}from"./index.f57e701d.js";import{r as Lr,i as Ar,c as Vr,j as Mr}from"./index.22795967.js";import{i as He,C as Rr,D as jr,I as Fr}from"./DelPopconfirm.810bbe7c.js";import{V as Ge,a as Hr}from"./index.43f3305c.js";import{I as $r}from"./index.5ff0f785.js";import"./index.05a6c0fd.js";import"./index.5d83d251.js";import"./index.83951463.js";var Te=globalThis&&globalThis.__assign||function(){return Te=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},Te.apply(this,arguments)};function Br(r,a){if(r){ar(r,Te({block:"start",behavior:"instant",scrollMode:"if-needed"},a));var t=r.offsetHeight,i=r.getBoundingClientRect().height;if(a&&a.boundary&&t!==i){var e=q(a.boundary)?a.boundary(r):a.boundary;e.scrollTop=Math.round(e.scrollTop*(t/i))}}}var Le=g.exports.createContext({}),te=globalThis&&globalThis.__assign||function(){return te=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},te.apply(this,arguments)};function Wr(r){return r.key||r._key}var Ur=function(r){var a,t=g.exports.useContext(Le),i=g.exports.useContext(_e).getPrefixCls,e=i("tree-node"),n=t.getTreeState(),c=n.expandedKeys,o=n.currentExpandKeys,v=r.expanded,s=g.exports.useRef(r.childrenData);s.current=r.childrenData,g.exports.useEffect(function(){return function(){t.onExpandEnd&&t.onExpandEnd(r._key)}},[]);var l=g.exports.useMemo(function(){var d=[],h=function(y){y.forEach(function(K){var D=t.getFieldInfo(K);d.push(D),D.children&&D.children.length&&h(D.children)})};return h(s.current||[]),d},[v]),u=g.exports.useMemo(function(){var d=[];if(l.length){var h=new Set(c||[]);l.forEach(function(y){var K,D,_=te({},t.key2nodeProps[y.key]);if(v)D=_.parentKey===r._key||((K=_.pathParentKeys)===null||K===void 0?void 0:K.every(function(p){return h.has(p)}));else if(_.pathParentKeys){var N=_.pathParentKeys.indexOf(r._key);D=_.pathParentKeys.slice(N+1).every(function(p){return h.has(p)})}D&&d.push(te(te({},_),{key:y.key}))})}return t.getNodeProps(d)},[l,r._key,v]),f=(a=t.virtualListProps)===null||a===void 0?void 0:a.height;return f=ir(f)?f:0,g.exports.useEffect(function(){o.indexOf(r._key)>-1&&u.length===0&&t.onExpandEnd(r._key)},[u,o]),k(lr,{in:o.indexOf(r._key)>-1&&u.length>0,unmountOnExit:!0,classNames:"tree-slide-expand",timeout:{enter:200,exit:0},onEnter:function(d){var h=d.scrollHeight;d.style.height=v?0:Math.min(f||h,d.scrollHeight)+"px"},onEntering:function(d){var h=d.scrollHeight;d.style.height=v?Math.min(f||h,h)+"px":0},onEntered:function(d){d.style.height=r.expanded?"":0,t.onExpandEnd(r._key)},onExit:function(d){d.style.display="none"},children:k(Ge,{...te({itemKey:Wr,className:e+"-list",isStaticItemHeight:!1},t.virtualListProps,{data:u,"aria-hidden":!0,style:{overflow:"hidden"}}),children:function(d){return k(xe,{...te({},d)})}})})},qr=Ur,B=globalThis&&globalThis.__assign||function(){return B=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},B.apply(this,arguments)},zr=globalThis&&globalThis.__awaiter||function(r,a,t,i){function e(n){return n instanceof t?n:new t(function(c){c(n)})}return new(t||(t=Promise))(function(n,c){function o(l){try{s(i.next(l))}catch(u){c(u)}}function v(l){try{s(i.throw(l))}catch(u){c(u)}}function s(l){l.done?n(l.value):e(l.value).then(o,v)}s((i=i.apply(r,a||[])).next())})},Gr=globalThis&&globalThis.__generator||function(r,a){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,e,n,c;return c={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function o(s){return function(l){return v([s,l])}}function v(s){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,e&&(n=s[0]&2?e.return:s[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,s[1])).done)return n;switch(e=0,n&&(s=[s[0]&2,n.value]),s[0]){case 0:case 1:n=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,e=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!n||s[1]>n[0]&&s[1]<n[3])){t.label=s[1];break}if(s[0]===6&&t.label<n[1]){t.label=n[1],n=s;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(s);break}n[2]&&t.ops.pop(),t.trys.pop();continue}s=a.call(r,t)}catch(l){s=[6,l],e=0}finally{i=n=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},$e=globalThis&&globalThis.__read||function(r,a){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],c;try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(o){c={error:o}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n},Yr=globalThis&&globalThis.__spreadArray||function(r,a,t){if(t||arguments.length===2)for(var i=0,e=a.length,n;i<e;i++)(n||!(i in a))&&(n||(n=Array.prototype.slice.call(a,0,i)),n[i]=a[i]);return r.concat(n||Array.prototype.slice.call(a))};function Jr(r,a){var t,i,e,n=this,c=g.exports.useContext(Le),o=g.exports.useContext(_e).getPrefixCls,v=g.exports.useRef(),s=$e(g.exports.useState({isAllowDrop:!0,isDragOver:!1,dragPosition:0,isDragging:!1}),2),l=s[0],u=s[1],f=r._key,d=f===void 0?"":f,h=r.title,y=r.icon,K=r.checkable,D=r.selected,_=r.disabled,N=r.disableCheckbox,p=r.isLeaf,C=r.draggable,w=r.expanded,b=r.showLine,E=r.loading,O=r.selectable,L=O===void 0?!0:O,m=o("tree-node"),I=J(m,(t={},t[m+"-selected"]=D,t[m+"-is-leaf"]=p,t[m+"-expanded"]=w,t[m+"-disabled-selectable"]=!L,t[m+"-disabled"]=_,t[m+"-draggable"]=C,t),r.className),T=function(){var S=q(c.icons)?c.icons(r):c.icons,A=q(r.icons)?r.icons(r):r.icons;return B(B({},S),A)}(),H=g.exports.useCallback(function(S){S!==w&&c.onExpand&&c.onExpand(S,d)},[w,c.onExpand]),R=g.exports.useCallback(function(){return zr(n,void 0,void 0,function(){var S,A,V;return Gr(this,function(W){switch(W.label){case 0:return S=r.isLeaf,A=r.expanded,S?[2]:!(!((V=r.childrenData)===null||V===void 0)&&V.length)&&q(c.loadMore)&&!A?[4,c.loadMore(r)]:[3,2];case 1:return W.sent(),[3,3];case 2:H(!A),W.label=3;case 3:return[2]}})})},[r,H,c.loadMore]),Q=function(){if(E)return"loadingIcon"in T?T.loadingIcon:k(dr,{});var S=null,A=!1;if(p)b&&(S="switcherIcon"in T?T.switcherIcon:k($r,{}),A=!0);else{var V=b?k("span",{className:m+"-"+(w?"minus":"plus")+"-icon"}):k(hr,{});S="switcherIcon"in T?T.switcherIcon:V,A=!b}if(S)return S=k("span",{className:m+"-switcher-icon","aria-label":w?"fold button":"expand button",role:"button",tabIndex:0,onClick:R,children:S}),A?k(fr,{prefix:m,children:S}):S},Z=g.exports.useCallback(or(function(S){var A=v.current;if(!!A){var V=A.getBoundingClientRect(),W=window.pageYOffset+V.top,le=S.pageY,Ce=V.height/4,oe=le-W,ye=oe<Ce?-1:oe<V.height-Ce?0:1,De=c.allowDrop(r,ye);u(B(B({},l),{isAllowDrop:De,isDragOver:!0,dragPosition:ye})),c.onNodeDragOver&&c.onNodeDragOver(S,r,ye)}}),[c.onNodeDragOver]),ve=g.exports.useCallback(function(S,A){var V=r.disableCheckbox,W=r.disabled;V||W||c.onCheck&&c.onCheck(S,d,A)},[r.disabled,r.disableCheckbox]);return G(sr,{children:[G("div",{style:r.style,className:I,ref:a,role:"treeitem","aria-disabled":_,"aria-expanded":w,"aria-level":r._level,children:[k("span",{className:m+"-indent","aria-hidden":!0,children:Yr([],$e(Array(r._level)),!1).map(function(S,A){var V;return k("span",{className:J(m+"-indent-block",(V={},V[m+"-indent-block-lineless"]=r._lineless&&r._lineless[A],V))},A)})}),k("span",{className:J(m+"-switcher",(i={},i[m+"-switcher-expanded"]=w,i)),children:Q()}),K?k(cr,{disabled:N||_,value:d,indeterminate:r.indeterminated,checked:r.checked,onChange:ve}):null,G("span",{"aria-grabbed":l.isDragging,ref:v,className:J(m+"-title",(e={},e[m+"-title-draggable"]=C,e[m+"-title-gap-top"]=l.isDragOver&&l.isAllowDrop&&l.dragPosition<0,e[m+"-title-gap-bottom"]=l.isDragOver&&l.isAllowDrop&&l.dragPosition>0,e[m+"-title-highlight"]=!l.isDragging&&l.isDragOver&&l.isAllowDrop&&l.dragPosition===0,e[m+"-title-dragging"]=l.isDragging,e[m+"-title-block"]=r.blockNode,e)),onClick:function(S){var A=c.onSelect,V=c.actionOnClick;if(!r.disabled){var W=[].concat(V);L&&W.indexOf("select")>-1&&A&&A(d,S),W.indexOf("expand")>-1&&R(),K&&W.indexOf("check")>-1&&ve(!r.checked,S)}},draggable:C,onDrop:function(S){S.stopPropagation(),S.preventDefault(),c.onNodeDrop&&c.onNodeDrop(S,r,l.dragPosition),Z.cancel(),u(B(B({},l),{isDragOver:!1,dragPosition:0}))},onDragStart:function(S){if(!!C){S.stopPropagation(),u(B(B({},l),{isDragging:!0})),c.onNodeDragStart&&c.onNodeDragStart(S,r);try{S.dataTransfer.setData("text/plain","")}catch{}}},onDragEnd:function(S){!C||(S.stopPropagation(),Z.cancel(),u(B(B({},l),{isDragOver:!1,isDragging:!1})),c.onNodeDragEnd&&c.onNodeDragEnd(S,r))},onDragOver:function(S){S.preventDefault(),S.stopPropagation(),S.persist(),Z(S)},onDragLeave:function(S){!C||(S.stopPropagation(),Z.cancel(),u(B(B({},l),{isDragOver:!1})),c.onNodeDragLeave&&c.onNodeDragLeave(S,r))},children:[y&&k("span",{className:m+"-icon "+m+"-custom-icon",children:y}),k("span",{className:m+"-title-text",children:q(c.renderTitle)?c.renderTitle(r):h}),C&&k("span",{className:m+"-icon "+m+"-drag-icon",children:"dragIcon"in T?T.dragIcon:k(ur,{})})]}),q(c.renderExtra)&&c.renderExtra(r)]}),k(qr,{...B({},r)})]})}var Ye=g.exports.forwardRef(Jr);Ye.displayName="TreeNode";var xe=Se.memo(Ye),ue=globalThis&&globalThis.__assign||function(){return ue=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},ue.apply(this,arguments)},Xr=globalThis&&globalThis.__read||function(r,a){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],c;try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(o){c={error:o}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n},Qr=globalThis&&globalThis.__spreadArray||function(r,a,t){if(t||arguments.length===2)for(var i=0,e=a.length,n;i<e;i++)(n||!(i in a))&&(n||(n=Array.prototype.slice.call(a,0,i)),n[i]=a[i]);return r.concat(n||Array.prototype.slice.call(a))};function Zr(r){return r.key||r._key}function et(r,a){var t=r.className,i=r.style,e=r.filterNode,n=r.virtualListProps,c=r.expandedKeys,o=r.currentExpandKeys,v=r.nodeList,s=r.getNodeProps,l=r.getDataSet,u=(n==null?void 0:n.threshold)!==null,f=g.exports.useRef(),d=g.exports.useRef(),h=g.exports.useRef(),y=g.exports.useMemo(function(){return new Set(c)},[c]),K=g.exports.useMemo(function(){var N=new Set,p=new Set(o);return v.forEach(function(C){var w=C.pathParentKeys||[];w.every(function(b){return!p.has(b)&&y.has(b)})&&N.add(C._key)}),N},[y,o,v]),D=function(){return v.filter(function(N){var p=!e||e&&e(N);return!!(p&&K.has(N.key))})},_=g.exports.useMemo(function(){return D()},[v,e,K]);return g.exports.useImperativeHandle(a,function(){return{scrollIntoView:function(N,p){var C=N,w=typeof N=="string";if(w){var b=N;!K.has(N)&&p&&p.pathParentKeys&&(b=Qr([],Xr(p.pathParentKeys),!1).reverse().find(function(L){return K.has(L)})||C),C=_.findIndex(function(L){var m=L._key;return m===b})}if(!u&&d.current){var E=d.current,O=E?E.children[C]:null;O&&Br(O,{boundary:E.parentElement})}else f.current&&f.current.scrollTo({index:C})}}}),u?k(Ge,{...ue({className:t,style:i,ref:f,data:_,isStaticItemHeight:!1,itemKey:Zr,onMouseDown:r.onMouseDown},r.ariaProps,n),children:function(N,p,C){var w=C.itemIndex;w===0&&(h.current=l());var b=s(N,h.current),E=k(xe,{...ue({},N,{key:N.key},b)});return E}}):k("div",{...ue({role:"tree",tabIndex:0,className:t,style:i,ref:d},r.ariaProps,{onMouseDown:r.onMouseDown}),children:_.map(function(N){var p=s(N),C=k(xe,{...ue({},p,{key:N.key})});return C})})}var rt=g.exports.forwardRef(et),Ne=globalThis&&globalThis.__assign||function(){return Ne=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},Ne.apply(this,arguments)},ae=globalThis&&globalThis.__read||function(r,a){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],c;try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(o){c={error:o}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n},ie=globalThis&&globalThis.__spreadArray||function(r,a,t){if(t||arguments.length===2)for(var i=0,e=a.length,n;i<e;i++)(n||!(i in a))&&(n||(n=Array.prototype.slice.call(a,0,i)),n[i]=a[i]);return r.concat(n||Array.prototype.slice.call(a))},Je=function(r){var a=function(t){return Se.Children.map(t,function(i){if(!!Se.isValidElement(i)){var e=i.key;return Ne(Ne({},i.props),{key:e,children:a(i.props.children)})}})};return a(r)};function Xe(r,a){var t=new Set,i=function(e){e.map(function(n){var c=n.key,o=a[c];!o||o.disabled||o.disableCheckbox||o.checkable===!1||(t.add(c),i(o.children||[]))})};return r&&i(r.children||[]),t}var Qe=function(r,a,t,i){var e=ie([],ae(a[r].pathParentKeys),!1);e.reverse().some(function(n){var c=a[n];if(c&&!c.disabled&&!c.disableCheckbox&&c.checkable!==!1){var o=0,v=0;c.children.some(function(s){var l=s.key,u=a[l];if(!u||u.disabled||u.disableCheckbox||u.checkable===!1)return!1;if(o++,t.has(l))v++;else if(i.has(l))return v+=.5,!0}),!v||v===o?i.delete(n):i.add(n),v&&v===o?t.add(n):t.delete(n)}else return!0})};function Ze(r,a){var t=new Set(r||[]),i=new Set,e=new Set;return r.forEach(function(n){if(!e.has(n)){var c=Xe(a[n],a);c.forEach(function(o){e.add(o)})}a[n]&&!a[n].pathParentKeys.some(function(o){return t.has(o)})&&Qe(n,a,t,i)}),{checkedKeys:ie([],ae(new Set(ie(ie([],ae(t),!1),ae(e),!1))),!1),indeterminateKeys:ie([],ae(i),!1)}}function er(r,a,t,i,e){if(!i[r])return{checkedKeys:t,indeterminateKeys:e};var n=new Set(t),c=new Set(e),o=Xe(i[r],i),v=n;return a?(v.add(r),c.delete(r),o.forEach(function(s){v.add(s)})):(c.delete(r),v.delete(r),o.forEach(function(s){v.delete(s)})),Qe(r,i,n,c),{checkedKeys:ie([],ae(v),!1),indeterminateKeys:ie([],ae(c),!1)}}var tt=globalThis&&globalThis.__extends||function(){var r=function(a,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])},r(a,t)};return function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(a,t);function i(){this.constructor=a}a.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),F=globalThis&&globalThis.__assign||function(){return F=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},F.apply(this,arguments)},nt=globalThis&&globalThis.__awaiter||function(r,a,t,i){function e(n){return n instanceof t?n:new t(function(c){c(n)})}return new(t||(t=Promise))(function(n,c){function o(l){try{s(i.next(l))}catch(u){c(u)}}function v(l){try{s(i.throw(l))}catch(u){c(u)}}function s(l){l.done?n(l.value):e(l.value).then(o,v)}s((i=i.apply(r,a||[])).next())})},at=globalThis&&globalThis.__generator||function(r,a){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,e,n,c;return c={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function o(s){return function(l){return v([s,l])}}function v(s){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,e&&(n=s[0]&2?e.return:s[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,s[1])).done)return n;switch(e=0,n&&(s=[s[0]&2,n.value]),s[0]){case 0:case 1:n=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,e=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!n||s[1]>n[0]&&s[1]<n[3])){t.label=s[1];break}if(s[0]===6&&t.label<n[1]){t.label=n[1],n=s;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(s);break}n[2]&&t.ops.pop(),t.trys.pop();continue}s=a.call(r,t)}catch(l){s=[6,l],e=0}finally{i=n=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},it=globalThis&&globalThis.__rest||function(r,a){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&a.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)a.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(t[i[e]]=r[i[e]]);return t},Y=globalThis&&globalThis.__read||function(r,a){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],c;try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(o){c={error:o}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n},$=globalThis&&globalThis.__spreadArray||function(r,a,t){if(t||arguments.length===2)for(var i=0,e=a.length,n;i<e;i++)(n||!(i in a))&&(n||(n=Array.prototype.slice.call(a,0,i)),n[i]=a[i]);return r.concat(n||Array.prototype.slice.call(a))},rr={key:"key",title:"title",children:"children",selectable:"selectable",disabled:"disabled",disableCheckbox:"disableCheckbox",checkable:"checkable",isLeaf:"isLeaf"},lt={selectable:!0,autoExpandParent:!0,checkedStrategy:"all",actionOnClick:"select",allowDrop:function(){return!0},fieldNames:rr},ot=["style","className","height","size","blockNode","autoExpandParent","checkedStrategy","fieldNames","icons","virtualListProps","showLine","selectable","allowDrop","actionOnClick"],st=function(r){tt(a,r);function a(t,i){var e=r.call(this,t,i)||this;e.key2nodeProps={},e.getMergedProps=function(l){var u=e.context.componentConfig,f=l||e.props,d=(u==null?void 0:u.Tree)||{},h={};return ot.forEach(function(y){Pe(f[y])?Pe(d[y])?h[y]=lt[y]:h[y]=d[y]:h[y]=f[y]}),h},e.scrollIntoView=function(l,u){var f=l;u&&(f=u._key),e.nodeListRef&&e.nodeListRef.scrollIntoView(f,u||e.key2nodeProps[f])},e.getTreeData=function(){return"treeData"in e.props?e.props.treeData:Je(e.props.children)},e.needUpdateTreeData=function(l,u){var f=["fieldNames","selectable","draggable","checkStrictly","showLine","blockNode","checkable","treeData","children"];return l.treeData!==u.treeData||l.children!==u.children||f.some(function(d){return z(l[d],u[d])})},e.getFieldInfo=function(l){var u=e.getMergedProps(),f=u.selectable,d=F(F({},rr),"treeData"in e.props?u.fieldNames:{}),h={children:l[d.children],selectable:d.selectable in l?l[d.selectable]:f,checkable:d.checkable in l?l[d.checkable]:e.props.checkable,title:l[d.title],disabled:l[d.disabled],disableCheckbox:l[d.disableCheckbox],isLeaf:l[d.isLeaf],key:l[d.key]};return d.key in l||delete h.key,h},e.getNodeList=function(l,u){e.key2nodeProps={};var f=u||e.context.getPrefixCls("tree"),d=[],h=0,y=e.getMergedProps(),K=y.showLine,D=y.blockNode,_=function(N,p){var C=N.length;return N.map(function(w,b){var E=e.getFieldInfo(w),O=E.children,L=E.selectable,m=E.checkable,I=E.key,T=I===void 0?((p==null?void 0:p._key)||"")+"-"+b:I,H=it(E,["children","selectable","checkable","key"]),R=F(F(F({dataRef:w,draggable:e.props.draggable,selectable:L,checkable:m,showLine:K,blockNode:D},w),H),{key:T,children:O,_key:T,_index:h++,parentKey:p?p._key:void 0,pathParentKeys:p&&p.pathParentKeys||[],_level:p._level||0,_lineless:p&&p._lineless?$($([],Y(p._lineless||[]),!1),[p._isTail],!1):[]});return C===b+1&&(R.className=J(f+"-node-is-tail",R.className)),d.push(R),e.key2nodeProps[T]=R,O&&O.length&&(e.key2nodeProps[T].children=_(O,{_key:T,_level:R._level+1,_lineless:R._lineless,_isTail:C===b+1,pathParentKeys:$($([],Y((p==null?void 0:p.pathParentKeys)||[]),!1),[T],!1)})),R})};return _(l||[],{}),d},e.getInitExpandedKeys=function(l){if(!e.getMergedProps().autoExpandParent)return l||[];if(!l)return Object.keys(e.key2nodeProps).filter(function(f){var d=e.key2nodeProps[f];return d.children&&d.children.length});var u={};return l.forEach(function(f){var d=e.key2nodeProps[f];!d||(u[f]=1,d.pathParentKeys&&d.pathParentKeys.forEach(function(h){u[h]=1}))}),Object.keys(u)},e.getInitCheckedKeys=function(l){if(!e.props.checkStrictly){var u=Ze(l,e.key2nodeProps),f=u.checkedKeys,d=u.indeterminateKeys;return{checkedKeys:f,halfCheckedKeys:d}}return{checkedKeys:l,halfCheckedKeys:e.props.halfCheckedKeys||[]}},e.handleSelect=function(l,u){var f=e.props.onSelect,d={e:u,node:e.getCacheNode([l])[0]};if(e.props.multiple){var h=$([],Y(e.state.selectedKeys),!1),y=h.indexOf(l);y>-1?(h.splice(y,1),d.selected=!1):(d.selected=!0,h.push(l)),d.selectedNodes=e.getCacheNode(h),"selectedKeys"in e.props||e.setState({selectedKeys:h}),f&&f(h,d)}else d.selected=!0,d.selectedNodes=e.getCacheNode([l]),"selectedKeys"in e.props||e.setState({selectedKeys:[l]}),f&&f([l],d)},e.handleCheck=function(l,u,f){var d=e.getMergedProps().checkedStrategy,h=e.props,y=h.onCheck,K=h.checkStrictly,D={e:f,node:e.getCacheNode([u])[0]},_=e.state.checkedKeys,N=e.state.halfCheckedKeys;if(K){l?_=_.concat(u):_=_.filter(function(E){return E!==u});var p={};"checkedKeys"in e.props||(p.checkedKeys=_),"halfCheckedKeys"in e.props||(p.halfCheckedKeys=N),vr(p)||e.setState(F({},p))}else{var C=er(u,l,_,e.key2nodeProps,N),w=C.checkedKeys,b=C.indeterminateKeys;_=w,N=b,"checkedKeys"in e.props?e.setState({halfCheckedKeys:N}):e.setState({checkedKeys:_,halfCheckedKeys:N}),d===a.SHOW_PARENT?_=_.filter(function(E){var O=e.key2nodeProps[E];if(!O||_.indexOf(O.parentKey)===-1)return!0}):d===a.SHOW_CHILD&&(_=_.filter(function(E){var O,L,m=e.key2nodeProps[E];if(!m||!(!((O=m.children)===null||O===void 0)&&O.length)||((L=m.children)===null||L===void 0?void 0:L.every(function(I){return _.indexOf(I._key)===-1})))return!0}))}y&&y(_,F({checkedNodes:e.getCacheNode(_),checked:l,halfCheckedKeys:N,halfCheckedNodes:e.getCacheNode(N)},D))},e.handleLoadMore=function(l){var u=e.props.loadMore;if(q(u)){var f=e.state,d=f.loadingKeys,h=d===void 0?[]:d,y=f.loadedKeys;e.setState({loadingKeys:Array.from(new Set($($([],Y(h),!1),[l._key],!1))),loadedKeys:y.filter(function(K){return K!==l._key})},function(){return nt(e,void 0,void 0,function(){var K;return at(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),[4,u(this.getCacheNode([l._key])[0])];case 1:return D.sent(),this.setState({loadedKeys:Array.from(new Set($($([],Y(this.state.loadedKeys),!1),[l._key],!1))),loadingKeys:this.state.loadingKeys.filter(function(_){return _!==l._key})}),this.handleExpand(!l.expanded,l._key),[3,3];case 2:return K=D.sent(),console.error("[tree]load data error: ",K),this.setState({loadingKeys:this.state.loadingKeys.filter(function(_){return _!==l._key})}),[3,3];case 3:return[2]}})})})}},e.handleNodeDragStart=function(l,u){e.dragNode=e.getCacheNode([u._key])[0],e.dropPosition=0;var f=e.props.onDragStart;f&&f(l,e.getCacheNode([u._key])[0])},e.handleNodeDragEnd=function(l,u){e.dragNode=null,e.dropPosition=0;var f=e.props.onDragEnd;f&&f(l,e.getCacheNode([u._key])[0])},e.handleNodeDragOver=function(l,u,f){e.dropPosition=f;var d=e.props.onDragOver;d&&d(l,e.getCacheNode([u._key])[0])},e.handleNodeDragLeave=function(l,u){e.dropPosition=0;var f=e.props.onDragLeave;f&&f(l,e.getCacheNode([u._key])[0])},e.isChildOfNode=function(l,u){for(var f=e.key2nodeProps[l.parentKey];f;){var d=f._key,h=f.parentKey;if(d===u.props._key)return!0;if(h===d)return;f=e.key2nodeProps[h]}},e.isSameNode=function(l,u){if(l===void 0||u===void 0)return!1;if(l===u)return!0;var f=l.key,d=u.key;if(f!==void 0||d!==void 0)return f===d;var h=l.props._key,y=u.props._key;return h===void 0&&y===void 0?!1:h===y},e.handleNodeDrop=function(l,u,f){if(e.dragNode){var d=e.getMergedProps().allowDrop,h=e.props.onDrop,y=e.getCacheNode([u._key])[0];if(h&&!e.isChildOfNode(u,e.dragNode)&&!e.isSameNode(e.dragNode,y)){if(d&&!d({dropNode:y,dragNode:e.dragNode,dropPosition:f}))return;h({dragNode:e.dragNode,dropNode:y,dropPosition:f,e:l})}}},e.handleAllowDrop=function(l,u){var f=e.getMergedProps().allowDrop,d=!0;return typeof f=="function"&&(d=f({dropNode:e.getCacheNode([l._key])[0],dragNode:e.dragNode,dropPosition:u})),d},e.handleExpand=function(l,u){var f=e.state,d=f.currentExpandKeys,h=f.expandedKeys,y=h===void 0?[]:h,K=e.props.onExpand;if(!(d.indexOf(u)>-1)){var D=[];l?D=Array.from(new Set($($([],Y(y),!1),[u],!1))):D=y.filter(function(_){return _!==u}),"expandedKeys"in e.props||e.setState({expandedKeys:D,currentExpandKeys:$($([],Y(d),!1),[u],!1)}),K&&K(D,{expanded:l,node:e.getCacheNode([u])[0],expandedNodes:e.getCacheNode(D)})}},e.getCacheNode=function(l){var u=e.props.__ArcoAdapterMode__,f=[];[].concat(l).forEach(function(h){var y=e.key2nodeProps[h];y&&f.push(y)});var d=e.getNodeProps(f);return d.map(function(h){return u?{props:h,key:l}:k(xe,{...F({},h,{key:h.key})})})},e.getDataSet=function(l){var u,f,d,h;return{expandedKeysSet:(l==null?void 0:l.expandedKeysSet)||new Set(((u=e.state)===null||u===void 0?void 0:u.expandedKeys)||[]),checkedKeysSet:(l==null?void 0:l.checkedKeysSet)||new Set(((f=e.state)===null||f===void 0?void 0:f.checkedKeys)||[]),selectedKeysSet:(l==null?void 0:l.selectedKeysSet)||new Set(((d=e.state)===null||d===void 0?void 0:d.selectedKeys)||[]),halfCheckedKeysSet:(l==null?void 0:l.halfCheckedKeysSet)||new Set(((h=e.state)===null||h===void 0?void 0:h.halfCheckedKeys)||[])}},e.getNodeProps=function(l,u){var f=e.getMergedProps().autoExpandParent,d=e.props.loadMore,h=e.state,y=h.selectedKeys,K=h.expandedKeys,D=h.checkedKeys,_=h.loadingKeys,N=_===void 0?[]:_,p=h.loadedKeys,C=p===void 0?[]:p,w=e.getDataSet(u),b=w.expandedKeysSet,E=w.checkedKeysSet,O=w.selectedKeysSet,L=w.halfCheckedKeysSet,m=function(I){var T=I.children&&I.children.length,H={isLeaf:!T,autoExpandParent:T?f:!1,expanded:b?b.has(I._key):K.indexOf(I._key)>-1};if(d){var R=C.indexOf(I._key)>-1;H.loaded=R,H.isLeaf=T?!1:I.isLeaf}return F(F(F({},I),H),{selected:O.has(I._key),indeterminated:L.has(I._key),loading:N.indexOf(I._key)>-1,checked:E.has(I._key),selectedKeys:y,checkedKeys:D,loadingKeys:N,loadedKeys:C,expandedKeys:K,childrenData:I.children||[],children:null})};return de(l)?l.map(function(I){return m(I)}):m(l)},e.handleExpandEnd=function(l){var u=e.state.currentExpandKeys;u.indexOf(l)>-1&&e.setState({currentExpandKeys:u.filter(function(f){return f!==l})})},e.getTreeState=function(){return e.state},e.state={};var n=e.getTreeData(),c=e.getNodeList(n,i.getPrefixCls("tree")),o=e.getInitCheckedKeys(t.checkedKeys||t.defaultCheckedKeys||[]),v=o.checkedKeys,s=o.halfCheckedKeys;return e.state={selectedKeys:t.selectedKeys||t.defaultSelectedKeys||[],checkedKeys:v,halfCheckedKeys:s,expandedKeys:e.getInitExpandedKeys(t.expandedKeys||t.defaultExpandedKeys),loadedKeys:[],loadingKeys:[],currentExpandKeys:[],nodeList:c},e}return a.getDerivedStateFromProps=function(t,i){var e={};return"selectedKeys"in t&&!z(t.selectedKeys,i.selectedKeys)&&(e.selectedKeys=t.selectedKeys||[]),Object.keys(e).length?e:null},a.prototype.componentDidUpdate=function(t){var i=this,e=this.getMergedProps(t),n=this.getMergedProps();if(t!==this.props||!z(e,n)){var c={};if(this.needUpdateTreeData(F({prevMergedProps:e},t),F(F({},n),this.props))){var o=this.getTreeData(),v=this.getNodeList(o);c.treeData=o,c.nodeList=v}if(c.treeData||"checkedKeys"in this.props&&!z(t.checkedKeys,this.props.checkedKeys)){var s="checkedKeys"in this.props?this.props.checkedKeys:this.state.checkedKeys,l=this.getInitCheckedKeys(s||[]),u=l.halfCheckedKeys,f=l.checkedKeys;z(f,this.state.checkedKeys)||(c.checkedKeys=f),z(u,this.state.halfCheckedKeys)||(c.halfCheckedKeys=u)}this.props.checkStrictly&&"halfCheckedKeys"in this.props&&!z(t.halfCheckedKeys,this.props.halfCheckedKeys)&&(c.halfCheckedKeys=this.props.halfCheckedKeys),"expandedKeys"in this.props&&!z(this.props.expandedKeys,t.expandedKeys)&&(c.expandedKeys=this.props.expandedKeys,c.currentExpandKeys=$($([],Y(c.expandedKeys),!1),Y(this.state.expandedKeys),!1).reduce(function(h,y){var K=h.indexOf(y);return K===-1?h.push(y):h.splice(K,1),h},[]).filter(function(h,y,K){var D;if(i.key2nodeProps[h]){var _=i.key2nodeProps[h].pathParentKeys;return _.some(function(N){return K.indexOf(N)>-1})?!1:(D=i.key2nodeProps[h].children)===null||D===void 0?void 0:D.length}}));var d=c.currentExpandKeys||this.state.currentExpandKeys;c.treeData&&d&&(c.currentExpandKeys=d.filter(function(h){var y=c.treeData.find(function(K){return K.key===h});return y&&y.children&&y.children.length})),Object.keys(c).length&&this.setState(c)}},a.prototype.render=function(){var t,i=this,e=this.getMergedProps(),n=e.className,c=e.showLine,o=e.size,v=e.virtualListProps,s=e.height,l=e.style,u=e.icons,f=e.actionOnClick,d=this.props,h=d.loadMore,y=d.checkable,K=v?F({threshold:100},v):s?{height:s,threshold:100}:{threshold:null},D=this.context,_=D.getPrefixCls,N=D.rtl,p=_("tree");return k(Le.Provider,{value:{icons:u,key2nodeProps:this.key2nodeProps,getFieldInfo:this.getFieldInfo,getTreeState:this.getTreeState,getNodeProps:this.getNodeProps,onExpandEnd:this.handleExpandEnd,onSelect:this.handleSelect,onCheck:this.handleCheck,onNodeDragStart:this.handleNodeDragStart,onNodeDragEnd:this.handleNodeDragEnd,onNodeDragLeave:this.handleNodeDragLeave,onNodeDragOver:this.handleNodeDragOver,onNodeDrop:this.handleNodeDrop,onExpand:this.handleExpand,renderExtra:this.props.renderExtra,renderTitle:this.props.renderTitle,loadMore:h&&this.handleLoadMore,allowDrop:this.handleAllowDrop,actionOnClick:f,virtualListProps:K},children:k(rt,{ref:function(C){i.nodeListRef=C},className:J(p,(t={},t[p+"-checkable"]=y,t[p+"-show-line"]=c,t[p+"-size-"+o]=o,t[p+"-rtl"]=N,t),n),style:l,filterNode:this.props.filterNode,virtualListProps:K,expandedKeys:this.state.expandedKeys,currentExpandKeys:this.state.currentExpandKeys,getNodeProps:this.getNodeProps,getDataSet:this.getDataSet,nodeList:this.state.nodeList,onMouseDown:this.props.onMouseDown,ariaProps:F({role:"tree","aria-multiselectable":this.props.multiple,tabIndex:0},yr(this.props))})})},a.displayName="Tree",a.SHOW_PARENT="parent",a.SHOW_ALL="all",a.SHOW_CHILD="child",a.Node=xe,a.contextType=_e,a}(g.exports.Component),X=st,Ke=function(r){var a=r;return de(r)||(a=r==null?[]:[r]),a.map(function(t){return ke(t)?t.value:t})},be=globalThis&&globalThis.__assign||function(){return be=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},be.apply(this,arguments)},ct=globalThis&&globalThis.__read||function(r,a){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],c;try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(o){c={error:o}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n},we=function(r,a,t){if(r==null)return[];var i=de(r)?r:[r];return i.map(function(e){var n=ke(e)?be({},e):{value:e,label:void 0},c=a[n.value];if(c)n.label=n.label||c.title,n.disabled=c.disabled;else if(de(t)){var o=t.find(function(v){return v.value===n.value});n=be(be({},n),o)}return Pe(n.label)&&(n.label=n.value),n})},ut=function(r,a,t,i){if(!i.treeCheckStrictly){var e=Ze(r,a),n=e.checkedKeys,c=e.indeterminateKeys,o=n;return t.current=c,i.treeCheckedStrategy===X.SHOW_PARENT?o=o.filter(function(v){var s=a[v];if(!s||o.indexOf(s.parentKey)===-1)return!0}):i.treeCheckedStrategy===X.SHOW_CHILD&&(o=o.filter(function(v){var s=a[v];if(!s||!s.children||!s.children.length)return!0})),o}return t.current=[],r},dt=function(r,a,t){var i=g.exports.useRef([]),e=function(){var l=r.value||r.defaultValue||[];if(r.treeCheckable){var u=ut(Ke(l),a,t,r),f=we(l,a,i.current),d=we(u,a,f);return d}return we(l,a)},n=ct(g.exports.useState(e),2),c=n[0],o=n[1],v=function(l){i.current=l,o(l)};Ie(function(){var l=e();"value"in r&&(r.labelInValue?z(Ke(c),Ke(l))||v(l):z(c,l)||v(l))},[r.treeCheckedStrategy,r.treeCheckStrictly,r.treeCheckable,r.value,a]);var s=g.exports.useCallback(function(l,u){var f=r.onChange,d=r.labelInValue,h=r.multiple||r.treeCheckable;"value"in r||v(l);var y;h?y=l.map(function(K){return d?{label:K.label,value:K.value}:K.value}):y=d?l[0]:l[0]&&l[0].value,f&&f(y,u)},[r.onChange,r.labelInValue,r.multiple,r.treeCheckable,r.value]);return[c,s]},ft=dt,tr={key:"key",title:"title",children:"children",selectable:"selectable",disabled:"disabled",disableCheckbox:"disableCheckbox",checkable:"checkable",isLeaf:"isLeaf"},ht=globalThis&&globalThis.__read||function(r,a){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],c;try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(o){c={error:o}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n};function vt(r){var a=gr(r)||{},t=function(){return r.treeData||Je(r.children)},i=ht(g.exports.useState(t()),2),e=i[0],n=i[1];return Ie(function(){(r.treeData!==a.treeData||r.children!==a.children)&&n(t())},[r]),[e]}var fe=globalThis&&globalThis.__assign||function(){return fe=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},fe.apply(this,arguments)},yt=globalThis&&globalThis.__read||function(r,a){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],c;try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(o){c={error:o}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n},Be=globalThis&&globalThis.__spreadArray||function(r,a,t){if(t||arguments.length===2)for(var i=0,e=a.length,n;i<e;i++)(n||!(i in a))&&(n||(n=Array.prototype.slice.call(a,0,i)),n[i]=a[i]);return r.concat(n||Array.prototype.slice.call(a))},We=function(r,a,t){var i={},e=0,n=function(c,o){var v=c.length;return c.map(function(s,l){var u=s[t.children],f=t.key in s?s[t.key]:((o==null?void 0:o._key)||"")+"-"+l,d=fe(fe({},s),{title:s[t.title],selectable:s[t.selectable],disabled:s[t.disabled],disableCheckbox:s[t.disableCheckbox],checkable:s[t.checkable],isLeaf:s[t.isLeaf],key:f,children:u,_key:f,parentKey:o?o._key:void 0,pathParentKeys:o&&o.pathParentKeys||[],_level:o._level||0,_index:e++});return v===l+1&&(d.className=J(a+"-node-is-tail",d.className)),i[f]=d,u&&u.length&&(i[f].children=n(u,{_key:f,_level:d._level+1,pathParentKeys:Be(Be([],yt((o==null?void 0:o.pathParentKeys)||[]),!1),[f],!1)})),d})};return n(r||[],{}),i},gt=function(r,a){var t=g.exports.useContext(_e).getPrefixCls,i=fe(fe({},tr),a),e=pr(),n=t("tree"),c=g.exports.useRef(We(r,n,i));return Ie(function(){c.current=We(r,n,i),e()},[r]),c.current},pt=gt,Ee=globalThis&&globalThis.__assign||function(){return Ee=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},Ee.apply(this,arguments)},bt=globalThis&&globalThis.__read||function(r,a){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],c;try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(o){c={error:o}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n},kt=globalThis&&globalThis.__spreadArray||function(r,a,t){if(t||arguments.length===2)for(var i=0,e=a.length,n;i<e;i++)(n||!(i in a))&&(n||(n=Array.prototype.slice.call(a,0,i)),n[i]=a[i]);return r.concat(n||Array.prototype.slice.call(a))};function xt(r,a){var t=r.value,i=r.multiple,e=r.loadMore,n=r.treeCheckedStrategy,c=r.treeCheckStrictly,o=r.treeData,v=r.treeProps,s=r.prefixCls,l=r.treeCheckable,u=v&&v.renderTitle,f=g.exports.useRef(),d=g.exports.useCallback(function(C,w){var b=w.checkedNodes,E=w.checked,O=w.node,L=C.map(function(m){var I=b.find(function(H){return H&&H.props._key===m});if(!I){var T=t.find(function(H){return H.value===m});return T||{label:m,value:m}}return{label:I.props.title,value:I.props._key,disabled:I.props.disabled}});r.onChange(L,{checked:E,trigger:O==null?void 0:O.props})},[r.onChange,t]),h=g.exports.useCallback(function(C,w){var b=w.node,E=w.selected,O=[{value:b.props._key,label:b.props.title}];if(i){O=kt([],bt(t),!1);var L=O.findIndex(function(m){return m.value===b.props._key});L>-1?O.splice(L,1):O.push({value:b.props._key,label:b.props.title})}r.onChange(O,{trigger:b==null?void 0:b.props,selected:E})},[r.onChange,t,i]),y=g.exports.useCallback(function(C,w){var b=w.node,E=w.e,O=b.props,L=O.checked,m=O.checkable,I=O.disabled,T=O.disableCheckbox;f.current&&!T&&!I&&m!==!1&&f.current.handleCheck&&f.current.handleCheck(!L,b.props._key,E)},[]),K=g.exports.useCallback(function(C){if(q(e)){var w=C.props.dataRef;return e(C,w)}return[]},[e]),D=g.exports.useCallback(function(C){if(u)return u(C);var w=r.inputValue,b=C.title;if(w&&br(b)){var E=b.toLowerCase().indexOf(w.toLowerCase());if(E===-1)return b;var O=b.substr(0,E),L=b.substr(E+w.length);return G("span",{children:[O,k("span",{className:s+"-highlight",children:b.substr(E,w.length)}),L]})}return b},[s,r.inputValue,u]),_=g.exports.useMemo(function(){return r.treeCheckable?{onCheck:d,checkedKeys:t.map(function(C){return C.value})}:{}},[d,t,r.treeCheckable]),N=g.exports.useMemo(function(){return r.treeCheckable?[]:t.map(function(C){return C.value})},[r.treeCheckable,t]),p=g.exports.useCallback(function(C,w){r.treeCheckable?y(C,w):h(C,w)},[r.treeCheckable,y,h]);return g.exports.useImperativeHandle(a,function(){return f.current},[]),k(X,{...Ee({ref:f,size:r.size,blockNode:!0,filterNode:r.filterNode},v,{checkable:l,multiple:i,loadMore:r.loadMore?K:void 0,checkedStrategy:n,checkStrictly:c,onMouseDown:function(C){C.preventDefault()}},_,{treeData:o,fieldNames:r.fieldNames,renderTitle:D,onSelect:p,selectedKeys:N})})}var _t=g.exports.forwardRef(xt),ne=globalThis&&globalThis.__assign||function(){return ne=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},ne.apply(this,arguments)},Ct=globalThis&&globalThis.__awaiter||function(r,a,t,i){function e(n){return n instanceof t?n:new t(function(c){c(n)})}return new(t||(t=Promise))(function(n,c){function o(l){try{s(i.next(l))}catch(u){c(u)}}function v(l){try{s(i.throw(l))}catch(u){c(u)}}function s(l){l.done?n(l.value):e(l.value).then(o,v)}s((i=i.apply(r,a||[])).next())})},mt=globalThis&&globalThis.__generator||function(r,a){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,e,n,c;return c={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function o(s){return function(l){return v([s,l])}}function v(s){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,e&&(n=s[0]&2?e.return:s[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,s[1])).done)return n;switch(e=0,n&&(s=[s[0]&2,n.value]),s[0]){case 0:case 1:n=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,e=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!n||s[1]>n[0]&&s[1]<n[3])){t.label=s[1];break}if(s[0]===6&&t.label<n[1]){t.label=n[1],n=s;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(s);break}n[2]&&t.ops.pop(),t.trys.pop();continue}s=a.call(r,t)}catch(l){s=[6,l],e=0}finally{i=n=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},ce=globalThis&&globalThis.__read||function(r,a){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],c;try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(o){c={error:o}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n},Ue=globalThis&&globalThis.__spreadArray||function(r,a,t){if(t||arguments.length===2)for(var i=0,e=a.length,n;i<e;i++)(n||!(i in a))&&(n||(n=Array.prototype.slice.call(a,0,i)),n[i]=a[i]);return r.concat(n||Array.prototype.slice.call(a))};function Oe(r){return!r||de(r)&&r.length===0||ke(r)&&Object.keys(r).length===0}var Kt={bordered:!0,treeCheckedStrategy:X.SHOW_CHILD,fieldNames:tr},wt={bottom:4},St=function(r,a){var t=g.exports.useContext(_e),i=t.getPrefixCls,e=t.renderEmpty,n=t.componentConfig,c=t.rtl,o=kr(r,Kt,n==null?void 0:n.TreeSelect),v=xr(),s=g.exports.useRef(),l=g.exports.useRef(null),u=g.exports.useRef(null),f=g.exports.useRef([]),d=ce(vt(o),1),h=d[0],y=pt(h,o.fieldNames),K=ce(g.exports.useState(),2),D=K[0],_=K[1],N=ce(je(!1,{value:o.popupVisible}),2),p=N[0],C=N[1],w=ce(je(void 0,{value:"inputValue"in o?o.inputValue||"":void 0}),2),b=w[0],E=w[1],O=g.exports.useRef(b),L=g.exports.useRef(null),m=o.onInputValueChange,I=ce(ft(o,y,f),2),T=I[0],H=I[1],R=o.multiple||o.treeCheckable,Q=i("tree-select"),Z=b&&!q(o.onSearch),ve=_r(Q+"-popup-"),S=function(x){var P;x!==p&&(C(x),(P=o.onVisibleChange)===null||P===void 0||P.call(o,x))},A=function(x,P){(x!==O.current||P!==L.current)&&(E(x),O.current=x,L.current=P,m&&m(x,P))},V=g.exports.useCallback(function(x){var P=Cr(function(j){return Ct(void 0,void 0,void 0,function(){var M;return mt(this,function(U){switch(U.label){case 0:return q(o.onSearch)?[4,o.onSearch(j)]:[3,2];case 1:return U.sent(),[2];case 2:return j?(M=new Set,Object.keys(y).forEach(function(re){var ee=y[re],ge=!1;if(q(o.filterTreeNode))o.filterTreeNode(j,k(X.Node,{...ne({},ee)}))&&(ge=!0);else{var Re=ee.value||ee._key;Re&&Re.indexOf(j)>-1&&(ge=!0)}ge&&M.add(ee.key)}),_(M),[2]):[2,h]}})})},100);return P(x)},[o.onSearch,h,y,o.filterTreeNode]),W=g.exports.useCallback(function(){var x=!0;ke(o.showSearch)&&(x=o.showSearch.retainInputValueWhileSelect!==!1),o.multiple&&!x&&b!==void 0&&A("","optionChecked")},[b,o.multiple,JSON.stringify(o.showSearch)]),le=g.exports.useCallback(function(x,P){H(x,P),W(),R||S(!1)},[H,W,p]),Ce=function(x,P,j){if(j.stopPropagation(),!x.disabled){var M=ke(x.value)?x.value.value:x.value;if(!o.treeCheckable||o.treeCheckStrictly||!y[M]){var U=T.filter(function(ee,ge){return ge!==P});le(U,{trigger:y[M]||x,checked:!1,selected:!1});return}var re=er(M,!1,Ke(T),y,f.current);f.current=re.indeterminateKeys,le(we(re.checkedKeys,y,T),{trigger:y[M],checked:!1,selected:!1})}};g.exports.useEffect(function(){b!==void 0&&V(b),b!==O.current&&(O.current=b)},[b]);var oe=g.exports.useMemo(function(){var x=[];if(b)for(var P in y){var j=y[P],M=Ue(Ue([],ce(j.pathParentKeys),!1),[P],!1);M.some(function(U){return D&&D.has(U)})&&(x=x.concat(M))}return Array.from(new Set(x))},[b,y,D]);g.exports.useEffect(function(){p?setTimeout(function(){var x=T[0];l.current&&x&&l.current.scrollIntoView(x.value)}):v||b&&A("","optionListHide")},[p]),g.exports.useImperativeHandle(a,function(){return{focus:function(){u.current&&u.current.focus()},blur:function(){u.current&&u.current.blur()}}});var ye=g.exports.useCallback(function(x){return Z?oe.indexOf(x._key)>-1:!0},[Z,oe]),De=g.exports.useCallback(function(x){var P=x||{},j=P.disabled,M=P.value,U=x==null?void 0:x.label;return q(o.renderFormat)&&(U=o.renderFormat(y[M]||null,o.labelInValue?x:M)),{text:U||M||"",disabled:j}},[o.renderFormat,o.labelInValue,y]),nr=function(x){H(x,{})},Ve=function(x){return k(Kr,{...ne({autoAlignPopupWidth:!1,autoAlignPopupMinWidth:!0,ref:s,classNames:"slideDynamicOrigin",trigger:"click",position:"bl",getPopupContainer:o.getPopupContainer,popupAlign:wt,unmountOnExit:o.unmountOnExit},o.triggerProps,{className:J(Q+"-trigger",o.triggerProps&&o.triggerProps.className),popup:function(){var P,j,M,U,re=o.dropdownRender,ee=Z&&Oe(oe)||Oe(h)?o.notFoundContent||e("TreeSelect"):k(_t,{...ne({prefixCls:Q,ref:l},o,{inputValue:b,filterNode:ye,value:T,onChange:le,multiple:R,treeData:h})});return k("div",{id:ve,className:J(Q+"-popup",(P={},P[Q+"-rtl-popup"]=c,P)),style:ne({maxHeight:((j=o.treeProps)===null||j===void 0?void 0:j.height)||((U=(M=o.treeProps)===null||M===void 0?void 0:M.virtualListProps)===null||U===void 0?void 0:U.height)?"unset":""},o.dropdownMenuStyle),children:q(re)?re(ee):ee})},disabled:o.disabled,onVisibleChange:function(P){S(P)},popupVisible:p}),children:x})},Me=typeof o.triggerElement=="function"?function(){var x,P;return R?P=T.map(function(j){return o.labelInValue?{label:j.label,value:j.value}:j.value}):P=o.labelInValue?T[0]:(x=T[0])===null||x===void 0?void 0:x.value,o.triggerElement({value:P})}():o.triggerElement;return mr(Me)?k(Hr,{...ne({ref:u,rtl:c,ariaControls:ve},o,{popupVisible:p,value:!R&&de(T)?T[0]:T,inputValue:b,isEmptyValue:Oe(T),prefixCls:Q,isMultiple:R,renderText:De,onSort:nr,onRemoveCheckedItem:Ce,onClear:function(x){var P;x.stopPropagation(),le([],{}),(P=o.onClear)===null||P===void 0||P.call(o,!!p)},onKeyDown:function(x){var P;x.stopPropagation(),(P=o.onKeyDown)===null||P===void 0||P.call(o,x)},onFocus:function(x){x&&x.stopPropagation()},onChangeInputValue:function(x){A(x,"manual")},renderView:Ve})}):Ve(Me)},Nt=g.exports.forwardRef(St),he=Nt;he.displayName="TreeSelect";he.Node=X.Node;he.SHOW_ALL=X.SHOW_ALL;he.SHOW_PARENT=X.SHOW_PARENT;he.SHOW_CHILD=X.SHOW_CHILD;var Dt=he;function qe(r,a){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);a&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,i)}return t}function ze(r){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?qe(Object(t),!0).forEach(function(i){Sr(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qe(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function Ot(r,a){var t=g.exports.useContext(wr),i=t.prefixCls,e=i===void 0?"arco":i,n=r.spin,c=r.className,o=ze(ze({"aria-hidden":!0,focusable:!1,ref:a},r),{},{className:"".concat(c?c+" ":"").concat(e,"-icon ").concat(e,"-icon-subscribe-add")});return n&&(o.className="".concat(o.className," ").concat(e,"-icon-loading")),delete o.spin,delete o.isIcon,k("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...o,children:k("path",{d:"M24.53 6.007H9.97c-.535 0-.97.449-.97 1.003V41.8c0 .148.152.245.28.179l15.25-7.881 14.248 7.88c.129.067.28-.03.28-.179V22.06M27.413 11.023h6.794m0 0H41m-6.794 0V4m0 7.023v7.023"})})}var Ae=Se.forwardRef(Ot);Ae.defaultProps={isIcon:!0};Ae.displayName="IconSubscribeAdd";var Pt=Ae;const{Row:Tt,Col:me}=Or;function Et(r){const[a]=se.useForm(),[t,i]=g.exports.useState(!1),[e,n]=g.exports.useState();g.exports.useEffect(()=>{r.data&&(a.setFieldsValue(r.data),a.setFieldValue("pid",r.data.pid)),r.visible||(a.resetFields(),n(void 0))},[a,r.data,r.visible]);async function c(){a.validate().then(async o=>{var s;i(!0);let v;r.uuid?v=await Lr({...o,uuid:r.uuid,sortIndex:o.sortIndex?o.sortIndex:void 0,pid:e?e.id:void 0,level:e?e.level+1:void 0}):v=await Ar({...o,pid:(s=r.id)!=null?s:0,level:r.level?r.level+1:1}),v.code===0&&(Pr.success(v.message),r.reload(),r.close(),a.resetFields())}).catch(o=>{console.log(o)}).finally(()=>{i(!1)})}return k(Nr,{width:400,title:r.uuid?"\u66F4\u65B0\u5206\u7C7B":"\u521B\u5EFA\u5206\u7C7B",visible:r.visible,onOk:c,onCancel:r.close,confirmLoading:t,okText:r.uuid?"\u4FDD\u5B58":"\u521B\u5EFA",children:k(se,{form:a,children:G(Tt,{children:[k(me,{span:24,children:k(se.Item,{label:"\u540D\u5B57",field:"name",rules:[{required:!0,message:!0}],labelCol:{span:4},wrapperCol:{span:20},children:k(Fe,{type:"text"})})}),r.data&&k(me,{span:24,children:k(se.Item,{label:"\u7236\u7EA7",field:"pid",labelCol:{span:4},wrapperCol:{span:20},rules:[{validator(o,v){o===r.data.id&&v("\u4E0D\u53EF\u9009\u62E9\u5F53\u524D\u5206\u7C7B!"),v()}}],children:k(Dt,{treeData:r.pidOptions,fieldNames:{key:"id",title:"name"},placeholder:"\u9876\u7EA7",onChange:(o,v)=>{var s;n((s=v.trigger)==null?void 0:s.dataRef)},allowClear:!0})})}),k(me,{span:24,children:k(se.Item,{label:"\u7F16\u53F7",field:"code",rules:[{required:!0,message:!0}],labelCol:{span:4},wrapperCol:{span:20},children:k(Fe,{type:"text"})})}),k(me,{span:24,children:k(se.Item,{label:"\u6392\u5E8F",field:"sortIndex",labelCol:{span:4},wrapperCol:{span:20},children:k(Dr,{})})})]})})})}function Bt(){const r=g.exports.useRef(),[a,t]=He({visible:!1,close:()=>{t(v=>{v.visible=!1})}}),[i,e]=g.exports.useState(),[n]=He({reqDel:Mr});function c(v){const s=new Map,l=[];return v.forEach(u=>s.set(u.id,{...u,children:[]})),v.forEach(u=>{const f=s.get(u.pid);f?f.children.push(s.get(u.id)):l.push(s.get(u.id))}),l}g.exports.useEffect(()=>{t(v=>{v.pidOptions=r.current.getList()})},[r.current]);const o=[{title:"\u540D\u5B57",dataIndex:"name"},{title:"\u64CD\u4F5C",key:"option",render:(v,s)=>G(Rr,{children:[G(pe,{type:"text",onClick:()=>{t(l=>{l.id=s.id,l.level=s.level,l.uuid=void 0,l.visible=!0}),e(void 0)},children:[k(Pt,{}),"\u521B\u5EFA"]}),G(pe,{type:"text",onClick:()=>{t(l=>{l.id=void 0,l.level=void 0,l.uuid=s.uuid,l.visible=!0}),e({name:s.name,code:s.code,sortIndex:s.sort_index,pid:s.pid,id:s.id})},children:[k(Tr,{}),"\u7F16\u8F91"]}),k(jr,{reqDel:n.reqDel,params:{uuid:s.uuid},reload:()=>r.current.reload(),children:G(pe,{type:"text",children:[k(Fr,{}),"\u5220\u9664"]})})]})}];return G(Er,{children:[k(Et,{data:i,visible:a.visible,id:a.id,level:a.level,uuid:a.uuid,close:a.close,reload:()=>r.current.reload(),pidOptions:a.pidOptions}),k(Ir,{ref:r,request:Vr,dataRender:c,columns:o,pagination:!1,pageSize:!1,toolBarRender:[k(pe,{type:"primary",onClick:()=>{t(v=>{v.id=void 0,v.visible=!0,v.uuid=void 0}),e(void 0)},children:"\u521B\u5EFA\u5206\u7C7B"},"create"),k(pe,{type:"primary",onClick:()=>r.current.reload(),children:"\u5237\u65B0"},"delete")]})]})}export{Bt as default};
